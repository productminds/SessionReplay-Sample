{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"constants.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/constants.ts"],"sourcesContent":["import { AMPLITUDE_PREFIX, ServerZone } from '@amplitude/analytics-core';\n\nexport const DEFAULT_EVENT_PROPERTY_PREFIX = '[Amplitude]';\n\nexport const DEFAULT_SESSION_REPLAY_PROPERTY = `${DEFAULT_EVENT_PROPERTY_PREFIX} Session Replay ID`;\nexport const DEFAULT_SESSION_START_EVENT = 'session_start';\nexport const DEFAULT_SESSION_END_EVENT = 'session_end';\nexport const DEFAULT_SAMPLE_RATE = 0;\nexport const DEFAULT_SERVER_ZONE = ServerZone.US;\n\nexport const SESSION_REPLAY_DEBUG_PROPERTY = `${DEFAULT_EVENT_PROPERTY_PREFIX} Session Replay Debug`;\n\nexport const BLOCK_CLASS = 'amp-block';\nexport const MASK_TEXT_CLASS = 'amp-mask';\nexport const UNMASK_TEXT_CLASS = 'amp-unmask';\nexport const SESSION_REPLAY_SERVER_URL = 'https://api-sr.amplitude.com/sessions/v2/track';\nexport const SESSION_REPLAY_EU_URL = 'https://api-sr.eu.amplitude.com/sessions/v2/track';\nexport const SESSION_REPLAY_STAGING_URL = 'https://api-sr.stag2.amplitude.com/sessions/v2/track';\nexport const STORAGE_PREFIX = `${AMPLITUDE_PREFIX}_replay_unsent`;\nexport const MAX_EVENT_LIST_SIZE_IN_BYTES = 1 * 1000000; // 1 MB\nexport const INTERACTION_MIN_INTERVAL = 30_000; // 30 seconds\nexport const INTERACTION_MAX_INTERVAL = 60_000; // 1 minute\nexport const MIN_INTERVAL = 500; // 500 ms\nexport const MAX_INTERVAL = 10 * 1000; // 10 seconds\nexport const MAX_IDB_STORAGE_LENGTH = 1000 * 60 * 60 * 24 * 3; // 3 days\nexport const KB_SIZE = 1024;\nexport const MAX_URL_LENGTH = 1000;\n\nexport enum CustomRRwebEvent {\n  GET_SR_PROPS = 'get-sr-props',\n  DEBUG_INFO = 'debug-info',\n  FETCH_REQUEST = 'fetch-request',\n  METADATA = 'metadata',\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,gBAAgB,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;;AAElE,IAAM,6BAA6B,GAAG,aAAa,CAAC;AAEpD,IAAM,+BAA+B,GAAG,GAAA,MAAA,CAAG,6BAA6B,EAAA,qBAAoB,CAAC;AAC7F,IAAM,2BAA2B,GAAG,eAAe,CAAC;AACpD,IAAM,yBAAyB,GAAG,aAAa,CAAC;AAChD,IAAM,mBAAmB,GAAG,CAAC,CAAC;AAC9B,IAAM,mBAAmB,6LAAG,aAAU,CAAC,EAAE,CAAC;AAE1C,IAAM,6BAA6B,GAAG,GAAA,MAAA,CAAG,6BAA6B,EAAA,wBAAuB,CAAC;AAE9F,IAAM,WAAW,GAAG,WAAW,CAAC;AAChC,IAAM,eAAe,GAAG,UAAU,CAAC;AACnC,IAAM,iBAAiB,GAAG,YAAY,CAAC;AACvC,IAAM,yBAAyB,GAAG,gDAAgD,CAAC;AACnF,IAAM,qBAAqB,GAAG,mDAAmD,CAAC;AAClF,IAAM,0BAA0B,GAAG,sDAAsD,CAAC;AAC1F,IAAM,cAAc,GAAG,GAAA,MAAA,sLAAG,mBAAgB,EAAA,iBAAgB,CAAC;AAC3D,IAAM,4BAA4B,GAAG,CAAC,GAAG,OAAO,CAAC,CAAC,OAAO;AACzD,IAAM,wBAAwB,GAAG,KAAM,CAAC,CAAC,aAAa;AACtD,IAAM,wBAAwB,GAAG,KAAM,CAAC,CAAC,WAAW;AACpD,IAAM,YAAY,GAAG,GAAG,CAAC,CAAC,SAAS;AACnC,IAAM,YAAY,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,aAAa;AAC7C,IAAM,sBAAsB,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,SAAS;AACjE,IAAM,OAAO,GAAG,IAAI,CAAC;AACrB,IAAM,cAAc,GAAG,IAAI,CAAC;AAEnC,IAAY,gBAKX;AALD,CAAA,SAAY,gBAAgB;IAC1B,gBAAA,CAAA,eAAA,GAAA,cAA6B,CAAA;IAC7B,gBAAA,CAAA,aAAA,GAAA,YAAyB,CAAA;IACzB,gBAAA,CAAA,gBAAA,GAAA,eAA+B,CAAA;IAC/B,gBAAA,CAAA,WAAA,GAAA,UAAqB,CAAA;AACvB,CAAC,EALW,gBAAgB,IAAA,CAAhB,gBAAgB,GAAA,CAAA,CAAA,GAK3B","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"file":"logger.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/logger.ts"],"sourcesContent":["import { ILogger, LogLevel } from '@amplitude/analytics-core';\n\nexport class SafeLoggerProvider implements ILogger {\n  private logger: ILogger;\n\n  log: typeof console.log;\n  warn: typeof console.warn;\n  error: typeof console.error;\n  debug: typeof console.debug;\n\n  constructor(loggerProvider: ILogger) {\n    this.logger = loggerProvider;\n    this.log = this.getSafeMethod('log');\n    this.warn = this.getSafeMethod('warn');\n    this.error = this.getSafeMethod('error');\n    this.debug = this.getSafeMethod('debug');\n  }\n\n  private getSafeMethod<K extends keyof ILogger>(method: K): ILogger[K] {\n    if (!this.logger) {\n      return (() => {\n        // No-op function fallback\n      }) as ILogger[K];\n    }\n\n    const fn = this.logger[method];\n    if (typeof fn === 'function') {\n      const originalFn = (fn as { __rrweb_original__?: ILogger[K] }).__rrweb_original__ ?? fn;\n      return originalFn.bind(this.logger) as ILogger[K];\n    }\n\n    return (() => {\n      // No-op function fallback\n    }) as ILogger[K];\n  }\n\n  enable(logLevel: LogLevel) {\n    this.logger.enable(logLevel);\n  }\n\n  disable() {\n    this.logger.disable();\n  }\n}\n"],"names":[],"mappings":";;;AAEA,IAAA,qBAAA;IAQE,SAAA,mBAAY,cAAuB;QACjC,IAAI,CAAC,MAAM,GAAG,cAAc,CAAC;QAC7B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;IAC3C,CAAC;IAEO,mBAAA,SAAA,CAAA,aAAa,GAArB,SAA+C,MAAS;;QACtD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,OAAO,AAAC;YACN,0BAA0B;YAC5B,CAAC,CAAe,CAAC;SAClB;QAED,IAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC/B,IAAI,OAAO,EAAE,KAAK,UAAU,EAAE;YAC5B,IAAM,UAAU,GAAG,CAAA,KAAC,EAA0C,CAAC,kBAAkB,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,EAAE,CAAC;YACxF,OAAO,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAe,CAAC;SACnD;QAED,OAAO,AAAC;QACN,0BAA0B;QAC5B,CAAC,CAAe,CAAC;IACnB,CAAC;IAED,mBAAA,SAAA,CAAA,MAAM,GAAN,SAAO,QAAkB;QACvB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC/B,CAAC;IAED,mBAAA,SAAA,CAAA,OAAO,GAAP;QACE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IACH,OAAA,kBAAC;AAAD,CAAC,AAzCD,IAyCC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"file":"types.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/config/types.ts"],"sourcesContent":["import { IConfig, LogLevel, ILogger } from '@amplitude/analytics-core';\nimport { StoreType, ConsoleLogLevel } from '../typings/session-replay';\n\nexport interface SamplingConfig {\n  sample_rate: number;\n  capture_enabled: boolean;\n}\n\nexport interface InteractionConfig {\n  trackEveryNms?: number;\n  enabled: boolean; // defaults to false\n  batch: boolean; // defaults to false\n  /**\n   * UGC filter rules.\n   */\n  ugcFilterRules?: UGCFilterRule[];\n}\n\nexport interface LoggingConfig {\n  console: {\n    enabled: boolean;\n    levels: ConsoleLogLevel[];\n  };\n  network?: {\n    enabled: boolean;\n  };\n}\n\nexport type SessionReplayRemoteConfig = {\n  sr_sampling_config?: SamplingConfig;\n  sr_privacy_config?: PrivacyConfig;\n  sr_interaction_config?: InteractionConfig;\n  sr_logging_config?: LoggingConfig;\n};\n\nexport interface SessionReplayRemoteConfigAPIResponse {\n  configs: {\n    sessionReplay: SessionReplayRemoteConfig;\n  };\n}\n\nexport type MaskLevel =\n  | 'light' // only mask a subset of inputs that's deemed sensitive - password, credit card, telephone #, email. These are information we never want to capture.\n  | 'medium' // mask all inputs\n  | 'conservative'; // mask all inputs and all texts\n\nexport const DEFAULT_MASK_LEVEL = 'medium';\n\n// err on the side of excluding more\nexport type PrivacyConfig = {\n  blockSelector?: string | string[]; // exclude in the UI\n  defaultMaskLevel?: MaskLevel;\n  maskSelector?: string[];\n  unmaskSelector?: string[];\n};\n\n/**\n * UGC filter rule.\n */\nexport type UGCFilterRule = {\n  /**\n   * The selector of the UGC element.\n   */\n  selector: string;\n  /**\n   * The replacement text for the UGC element.\n   */\n  replacement: string;\n};\n\nexport interface SessionReplayLocalConfig extends IConfig {\n  apiKey: string;\n  loggerProvider: ILogger;\n  /**\n   * LogLevel.None or LogLevel.Error or LogLevel.Warn or LogLevel.Verbose or LogLevel.Debug.\n   * Sets the log level.\n   *\n   * @defaultValue LogLevel.Warn\n   */\n  logLevel: LogLevel;\n  /**\n   * The maximum number of retries allowed for sending replay events.\n   * Once this limit is reached, failed events will no longer be sent.\n   *\n   * @defaultValue 2\n   */\n  flushMaxRetries: number;\n  /**\n   * Use this option to control how many sessions to select for replay collection.\n   * The number should be a decimal between 0 and 1, for example 0.4, representing\n   * the fraction of sessions to have randomly selected for replay collection.\n   * Over a large number of sessions, 0.4 would select 40% of those sessions.\n   * Sample rates as small as six decimal places (0.000001) are supported.\n   *\n   * @defaultValue 0\n   */\n  sampleRate: number;\n  privacyConfig?: PrivacyConfig;\n  /**\n   * Adds additional debug event property to help debug instrumentation issues\n   * (such as mismatching apps). Only recommended for debugging initial setup,\n   * and not recommended for production.\n   */\n  debugMode?: boolean;\n  /**\n   * Specifies the endpoint URL to fetch remote configuration.\n   * If provided, it overrides the default server zone configuration.\n   */\n  configServerUrl?: string;\n  /**\n   * Specifies the endpoint URL for sending session replay data.\n   * If provided, it overrides the default server zone configuration.\n   */\n  trackServerUrl?: string;\n  /**\n   * If stylesheets are inlined, the contents of the stylesheet will be stored.\n   * During replay, the stored stylesheet will be used instead of attempting to fetch it remotely.\n   * This prevents replays from appearing broken due to missing stylesheets.\n   * Note: Inlining stylesheets may not work in all cases.\n   */\n  shouldInlineStylesheet?: boolean;\n  version?: SessionReplayVersion;\n  /**\n   * Performance configuration config. If enabled, we will defer compression\n   * to be done during the browser's idle periods.\n   */\n  performanceConfig?: SessionReplayPerformanceConfig;\n  /**\n   * Specifies how replay events should be stored. `idb` uses IndexedDB to persist replay events\n   * when all events cannot be sent during capture. `memory` stores replay events only in memory,\n   * meaning events are lost when the page is closed. If IndexedDB is unavailable, the system falls back to `memory`.\n   */\n  storeType: StoreType;\n\n  /**\n   * Experimental features.\n   */\n  experimental?: {\n    /**\n     * If the SDK should compress the replay events using a webworker.\n     */\n    useWebWorker: boolean;\n  };\n\n  /**\n   * If true, applies a background color to blocked elements in the replay.\n   * This helps visualize which elements are blocked from being captured.\n   */\n  applyBackgroundColorToBlockedElements?: boolean;\n  interactionConfig?: InteractionConfig;\n}\n\nexport interface SessionReplayJoinedConfig extends SessionReplayLocalConfig {\n  captureEnabled?: boolean;\n  interactionConfig?: InteractionConfig;\n  loggingConfig?: LoggingConfig;\n}\n\nexport interface SessionReplayRemoteConfigFetch {\n  getServerUrl: () => void;\n  getSamplingConfig: (sessionId?: number) => Promise<SessionReplayRemoteConfig['sr_sampling_config'] | void>;\n  fetchRemoteConfig: (sessionId?: number) => Promise<SessionReplayRemoteConfig | void>;\n  getRemoteConfig: (sessionId?: number) => Promise<SessionReplayRemoteConfig | void>;\n}\n\nexport interface SessionReplayConfigs {\n  localConfig: SessionReplayLocalConfig;\n  joinedConfig: SessionReplayJoinedConfig;\n  remoteConfig: SessionReplayRemoteConfig | undefined;\n}\nexport interface SessionReplayJoinedConfigGenerator {\n  generateJoinedConfig: (sessionId?: string | number) => Promise<SessionReplayConfigs>;\n}\n\nexport interface SessionReplayMetadata {\n  remoteConfig: SessionReplayRemoteConfig | undefined;\n  localConfig: SessionReplayLocalConfig;\n  joinedConfig: SessionReplayJoinedConfig;\n  framework?: {\n    name: string;\n    version: string;\n  };\n  sessionId: string | number | undefined;\n  hashValue?: number;\n  sampleRate: number;\n  replaySDKType: string | null;\n  replaySDKVersion: string | undefined;\n  standaloneSDKType: string;\n  standaloneSDKVersion: string | undefined;\n}\n\nexport interface SessionReplayVersion {\n  version: string;\n  type: SessionReplayType;\n}\n\n/**\n * Configuration options for session replay performance.\n */\nexport interface SessionReplayPerformanceConfig {\n  /**\n   * If enabled, event compression will be deferred to occur during the browser's idle periods.\n   */\n  enabled: boolean;\n  /**\n   * Optional timeout in milliseconds for the `requestIdleCallback` API.\n   * If specified, this value will be used to set a maximum time for the browser to wait\n   * before executing the deferred compression task, even if the browser is not idle.\n   */\n  timeout?: number;\n}\n\nexport type SessionReplayType = 'standalone' | 'plugin' | 'segment';\n"],"names":[],"mappings":";;;AA8CO,IAAM,kBAAkB,GAAG,QAAQ,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"file":"get-input-type.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/utils/get-input-type.ts"],"sourcesContent":["export function toLowerCase<T extends string>(str: T): Lowercase<T> {\n  return str.toLowerCase() as unknown as Lowercase<T>;\n}\n\n/**\n * Get the type of an input element.\n * This takes care of the case where a password input is changed to a text input.\n * In this case, we continue to consider this of type password, in order to avoid leaking sensitive data\n * where passwords should be masked.\n */\nexport function getInputType(element: HTMLElement): Lowercase<string> | null {\n  // when omitting the type of input element(e.g. <input />), the type is treated as text\n  const type = (element as HTMLInputElement).type;\n\n  return element.hasAttribute('data-rr-is-password')\n    ? 'password'\n    : type\n    ? // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n      toLowerCase(type)\n    : null;\n}\n"],"names":[],"mappings":";;;;AAAM,SAAU,WAAW,CAAmB,GAAM;IAClD,OAAO,GAAG,CAAC,WAAW,EAA6B,CAAC;AACtD,CAAC;AAQK,SAAU,YAAY,CAAC,OAAoB;IAC/C,uFAAuF;IACvF,IAAM,IAAI,GAAI,OAA4B,CAAC,IAAI,CAAC;IAEhD,OAAO,OAAO,CAAC,YAAY,CAAC,qBAAqB,CAAC,GAC9C,UAAU,GACV,IAAI,GAEJ,WAAW,CAAC,IAAI,CAAC,GACjB,IAAI,CAAC;AACX,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"file":"helpers.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/helpers.ts"],"sourcesContent":["import { getGlobalScope, ServerZone } from '@amplitude/analytics-core';\nimport { DEFAULT_MASK_LEVEL, MaskLevel, PrivacyConfig, SessionReplayJoinedConfig, UGCFilterRule } from './config/types';\nimport {\n  KB_SIZE,\n  MASK_TEXT_CLASS,\n  SESSION_REPLAY_EU_URL,\n  SESSION_REPLAY_SERVER_URL,\n  SESSION_REPLAY_STAGING_URL,\n  UNMASK_TEXT_CLASS,\n} from './constants';\nimport { StorageData } from './typings/session-replay';\nimport { getInputType } from './utils/get-input-type';\n\ntype ChromeStorageEstimate = {\n  quota?: number;\n  usage?: number;\n  usageDetails?: { [key: string]: number };\n};\n\n/**\n * Light: Subset of inputs\n * Medium: All inputs\n * Conservative: All inputs and all texts\n */\nconst isMaskedForLevel = (elementType: 'input' | 'text', level: MaskLevel, element: HTMLElement | null): boolean => {\n  switch (level) {\n    case 'light': {\n      if (elementType !== 'input') {\n        return true;\n      }\n\n      const inputType = element ? getInputType(element) : '';\n      /* istanbul ignore if */ // TODO(lew): For some reason it's impossible to test this.\n      if (!inputType) {\n        return false;\n      }\n\n      if (['password', 'hidden', 'email', 'tel'].includes(inputType)) {\n        return true;\n      }\n\n      if ((element as HTMLInputElement).autocomplete.startsWith('cc-')) {\n        return true;\n      }\n\n      return false;\n    }\n    case 'medium':\n    case 'conservative':\n      return true;\n    default:\n      return isMaskedForLevel(elementType, DEFAULT_MASK_LEVEL, element);\n  }\n};\n\n/**\n * Checks if the given element set to be masked by rrweb\n *\n * Priority is:\n *  1. [In code] Element/class based masking/unmasking <> [Config based] Selector based masking/unmasking\n *  2. Use app defaults\n */\nconst isMasked = (\n  elementType: 'input' | 'text',\n  config: PrivacyConfig = { defaultMaskLevel: DEFAULT_MASK_LEVEL },\n  element: HTMLElement | null,\n): boolean => {\n  if (element) {\n    // Element or parent is explicitly instrumented in code to mask\n    if (element.closest('.' + MASK_TEXT_CLASS)) {\n      return true;\n    }\n\n    // Config has override for mask\n    const shouldMask = (config.maskSelector ?? []).some((selector) => element.closest(selector));\n    if (shouldMask) {\n      return true;\n    }\n\n    // Code or config has override to unmask\n    if (element.closest('.' + UNMASK_TEXT_CLASS)) {\n      return false;\n    }\n\n    // Here we are probably sent an element, but we want to match if they have a\n    // parent with an unmask selector.\n    const shouldUnmask = (config.unmaskSelector ?? []).some((selector) => element.closest(selector));\n    if (shouldUnmask) {\n      return false;\n    }\n  }\n\n  return isMaskedForLevel(elementType, config.defaultMaskLevel ?? DEFAULT_MASK_LEVEL, element);\n};\n\nexport const maskFn =\n  (elementType: 'text' | 'input', config?: PrivacyConfig) =>\n  (text: string, element: HTMLElement | null): string => {\n    return isMasked(elementType, config, element) ? text.replace(/[^\\s]/g, '*') : text;\n  };\n\nexport const generateHashCode = function (str: string) {\n  let hash = 0;\n  if (str.length === 0) return hash;\n  for (let i = 0; i < str.length; i++) {\n    const chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0;\n  }\n  return hash;\n};\n\nexport const isSessionInSample = function (sessionId: string | number, sampleRate: number) {\n  const hashNumber = generateHashCode(sessionId.toString());\n  const absHash = Math.abs(hashNumber);\n  const absHashMultiply = absHash * 31;\n  const mod = absHashMultiply % 1000000;\n  return mod / 1000000 < sampleRate;\n};\n\nexport const getCurrentUrl = () => {\n  const globalScope = getGlobalScope();\n  return globalScope?.location ? globalScope.location.href : '';\n};\n\nexport const generateSessionReplayId = (sessionId: string | number, deviceId: string): string => {\n  return `${deviceId}/${sessionId}`;\n};\n\nexport const getServerUrl = (serverZone?: keyof typeof ServerZone, trackServerUrl?: string): string => {\n  if (trackServerUrl) {\n    return trackServerUrl;\n  }\n\n  if (serverZone === ServerZone.STAGING) {\n    return SESSION_REPLAY_STAGING_URL;\n  }\n\n  if (serverZone === ServerZone.EU) {\n    return SESSION_REPLAY_EU_URL;\n  }\n\n  return SESSION_REPLAY_SERVER_URL;\n};\n\nconst isValidGlobUrl = (globUrl: string): boolean => {\n  if (typeof globUrl !== 'string' || globUrl.trim() === '') return false;\n  const urlPattern = /^\\/|^https?:\\/\\/[^\\s]+$/;\n  if (!urlPattern.test(globUrl)) return false;\n  return true;\n};\n\nconst globToRegex = (glob: string): RegExp => {\n  // Escape special regex characters, then convert globs\n  const escaped = glob\n    .replace(/[.+^${}()|[\\]\\\\]/g, '\\\\$&') // Escape regex specials\n    .replace(/\\*/g, '.*') // Convert * to .*\n    .replace(/\\?/g, '.'); // Convert ? to .\n\n  return new RegExp(`^${escaped}$`);\n};\n\nexport const validateUGCFilterRules = (ugcFilterRules: UGCFilterRule[]) => {\n  // validate ugcFilterRules\n  if (!ugcFilterRules.every((rule) => typeof rule.selector === 'string' && typeof rule.replacement === 'string')) {\n    throw new Error('ugcFilterRules must be an array of objects with selector and replacement properties');\n  }\n\n  // validate ugcFilterRules are valid globs\n  if (!ugcFilterRules.every((rule) => isValidGlobUrl(rule.selector))) {\n    throw new Error('ugcFilterRules must be an array of objects with valid globs');\n  }\n};\n\nexport const getPageUrl = (pageUrl: string, ugcFilterRules: UGCFilterRule[]) => {\n  // apply ugcFilterRules, order is important, first rule wins\n  for (const rule of ugcFilterRules) {\n    const regex = globToRegex(rule.selector);\n\n    if (regex.test(pageUrl)) {\n      return pageUrl.replace(regex, rule.replacement);\n    }\n  }\n\n  return pageUrl;\n};\n\nexport const getStorageSize = async (): Promise<StorageData> => {\n  try {\n    const globalScope = getGlobalScope();\n    if (globalScope) {\n      const { usage, quota, usageDetails }: ChromeStorageEstimate = await globalScope.navigator.storage.estimate();\n      const totalStorageSize = usage ? Math.round(usage / KB_SIZE) : 0;\n      const percentOfQuota = usage && quota ? Math.round((usage / quota + Number.EPSILON) * 1000) / 1000 : 0;\n      return { totalStorageSize, percentOfQuota, usageDetails: JSON.stringify(usageDetails) };\n    }\n  } catch (e) {\n    // swallow\n  }\n  return { totalStorageSize: 0, percentOfQuota: 0, usageDetails: '' };\n};\n\nexport const getDebugConfig = (config: SessionReplayJoinedConfig) => {\n  const debugConfig = {\n    ...config,\n  };\n  const { apiKey } = debugConfig;\n  debugConfig.apiKey = `****${apiKey.substring(apiKey.length - 4)}`;\n  return debugConfig;\n};\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"file":"local-config.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/config/local-config.ts"],"sourcesContent":["import { Config, Logger, FetchTransport, LogLevel } from '@amplitude/analytics-core';\nimport { DEFAULT_SAMPLE_RATE, DEFAULT_SERVER_ZONE } from '../constants';\nimport { SessionReplayOptions, StoreType } from '../typings/session-replay';\nimport {\n  SessionReplayLocalConfig as ISessionReplayLocalConfig,\n  InteractionConfig,\n  PrivacyConfig,\n  SessionReplayPerformanceConfig,\n  SessionReplayVersion,\n} from './types';\nimport { SafeLoggerProvider } from '../logger';\nimport { validateUGCFilterRules } from '../helpers';\n\nexport const getDefaultConfig = () => ({\n  flushMaxRetries: 2,\n  logLevel: LogLevel.Warn,\n  loggerProvider: new Logger(),\n  transportProvider: new FetchTransport(),\n});\n\nexport class SessionReplayLocalConfig extends Config implements ISessionReplayLocalConfig {\n  apiKey: string;\n  sampleRate: number;\n  privacyConfig?: PrivacyConfig;\n  interactionConfig?: InteractionConfig;\n  debugMode?: boolean;\n  configServerUrl?: string;\n  trackServerUrl?: string;\n  shouldInlineStylesheet?: boolean;\n  version?: SessionReplayVersion;\n  storeType: StoreType;\n  performanceConfig?: SessionReplayPerformanceConfig;\n  experimental?: { useWebWorker: boolean };\n  applyBackgroundColorToBlockedElements?: boolean;\n\n  constructor(apiKey: string, options: SessionReplayOptions) {\n    const defaultConfig = getDefaultConfig();\n    super({\n      transportProvider: defaultConfig.transportProvider,\n      loggerProvider: new SafeLoggerProvider(options.loggerProvider || defaultConfig.loggerProvider),\n      ...options,\n      apiKey,\n    });\n    this.flushMaxRetries =\n      options.flushMaxRetries !== undefined && options.flushMaxRetries <= defaultConfig.flushMaxRetries\n        ? options.flushMaxRetries\n        : defaultConfig.flushMaxRetries;\n\n    this.apiKey = apiKey;\n    this.sampleRate = options.sampleRate || DEFAULT_SAMPLE_RATE;\n    this.serverZone = options.serverZone || DEFAULT_SERVER_ZONE;\n    this.configServerUrl = options.configServerUrl;\n    this.trackServerUrl = options.trackServerUrl;\n    this.shouldInlineStylesheet = options.shouldInlineStylesheet;\n    this.version = options.version;\n    this.performanceConfig = options.performanceConfig;\n    this.storeType = options.storeType ?? 'idb';\n    this.applyBackgroundColorToBlockedElements = options.applyBackgroundColorToBlockedElements ?? false;\n\n    if (options.privacyConfig) {\n      this.privacyConfig = options.privacyConfig;\n    }\n    if (options.interactionConfig) {\n      this.interactionConfig = options.interactionConfig;\n\n      // validate ugcFilterRules, throw error if invalid - throw error at the beginning of the config\n      if (this.interactionConfig.ugcFilterRules) {\n        validateUGCFilterRules(this.interactionConfig.ugcFilterRules);\n      }\n    }\n    if (options.debugMode) {\n      this.debugMode = options.debugMode;\n    }\n    if (options.experimental) {\n      this.experimental = options.experimental;\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"file":"joined-config.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/config/joined-config.ts"],"sourcesContent":["import { RemoteConfigFetch, createRemoteConfigFetch } from '@amplitude/analytics-remote-config';\nimport { ILogger } from '@amplitude/analytics-core';\nimport { getDebugConfig } from '../helpers';\nimport { SessionReplayOptions } from '../typings/session-replay';\nimport { SessionReplayLocalConfig } from './local-config';\nimport {\n  SessionReplayLocalConfig as ISessionReplayLocalConfig,\n  PrivacyConfig,\n  SessionReplayConfigs,\n  SessionReplayJoinedConfig,\n  SessionReplayRemoteConfig,\n} from './types';\n\nexport const removeInvalidSelectorsFromPrivacyConfig = (privacyConfig: PrivacyConfig, loggerProvider: ILogger) => {\n  // This allows us to not search the DOM.\n  const fragment = document.createDocumentFragment();\n\n  const dropInvalidSelectors = (selectors: string[] | string = []): string[] | undefined => {\n    if (typeof selectors === 'string') {\n      selectors = [selectors];\n    }\n    selectors = selectors.filter((selector: string) => {\n      try {\n        fragment.querySelector(selector);\n      } catch {\n        loggerProvider.warn(`[session-replay-browser] omitting selector \"${selector}\" because it is invalid`);\n        return false;\n      }\n      return true;\n    });\n    if (selectors.length === 0) {\n      return undefined;\n    }\n    return selectors;\n  };\n  privacyConfig.blockSelector = dropInvalidSelectors(privacyConfig.blockSelector);\n  privacyConfig.maskSelector = dropInvalidSelectors(privacyConfig.maskSelector);\n  privacyConfig.unmaskSelector = dropInvalidSelectors(privacyConfig.unmaskSelector);\n  return privacyConfig;\n};\nexport class SessionReplayJoinedConfigGenerator {\n  private readonly localConfig: ISessionReplayLocalConfig;\n  private readonly remoteConfigFetch: RemoteConfigFetch<SessionReplayRemoteConfig>;\n\n  constructor(remoteConfigFetch: RemoteConfigFetch<SessionReplayRemoteConfig>, localConfig: ISessionReplayLocalConfig) {\n    this.localConfig = localConfig;\n    this.remoteConfigFetch = remoteConfigFetch;\n  }\n\n  async generateJoinedConfig(sessionId?: string | number): Promise<SessionReplayConfigs> {\n    const config: SessionReplayJoinedConfig = { ...this.localConfig };\n    // Special case here as optOut is implemented via getter/setter\n    config.optOut = this.localConfig.optOut;\n    // We always want captureEnabled to be true, unless there's an override\n    // in the remote config.\n    config.captureEnabled = true;\n    let remoteConfig: SessionReplayRemoteConfig | undefined;\n    try {\n      const samplingConfig = await this.remoteConfigFetch.getRemoteConfig(\n        'sessionReplay',\n        'sr_sampling_config',\n        sessionId,\n      );\n\n      const privacyConfig = await this.remoteConfigFetch.getRemoteConfig(\n        'sessionReplay',\n        'sr_privacy_config',\n        sessionId,\n      );\n\n      const ugcFilterRules = config.interactionConfig?.ugcFilterRules;\n      // This is intentionally forced to only be set through the remote config.\n      config.interactionConfig = await this.remoteConfigFetch.getRemoteConfig(\n        'sessionReplay',\n        'sr_interaction_config',\n        sessionId,\n      );\n      if (config.interactionConfig && ugcFilterRules) {\n        config.interactionConfig.ugcFilterRules = ugcFilterRules;\n      }\n\n      // This is intentionally forced to only be set through the remote config.\n      config.loggingConfig = await this.remoteConfigFetch.getRemoteConfig(\n        'sessionReplay',\n        'sr_logging_config',\n        sessionId,\n      );\n\n      if (samplingConfig || privacyConfig) {\n        remoteConfig = {};\n        if (samplingConfig) {\n          remoteConfig.sr_sampling_config = samplingConfig;\n        }\n        if (privacyConfig) {\n          remoteConfig.sr_privacy_config = privacyConfig;\n        }\n      }\n    } catch (err: unknown) {\n      const knownError = err as Error;\n      this.localConfig.loggerProvider.warn(knownError.message);\n      config.captureEnabled = false;\n    }\n\n    if (!remoteConfig) {\n      return {\n        localConfig: this.localConfig,\n        joinedConfig: config,\n        remoteConfig,\n      };\n    }\n\n    const { sr_sampling_config: samplingConfig, sr_privacy_config: remotePrivacyConfig } = remoteConfig;\n    if (samplingConfig && Object.keys(samplingConfig).length > 0) {\n      if (Object.prototype.hasOwnProperty.call(samplingConfig, 'capture_enabled')) {\n        config.captureEnabled = samplingConfig.capture_enabled;\n      } else {\n        config.captureEnabled = false;\n      }\n\n      if (Object.prototype.hasOwnProperty.call(samplingConfig, 'sample_rate')) {\n        config.sampleRate = samplingConfig.sample_rate;\n      }\n    } else {\n      // If config API response was valid (ie 200), but no config returned, assume that\n      // customer has not yet set up config, and use sample rate from SDK options,\n      // allowing for immediate replay capture\n      config.captureEnabled = true;\n      this.localConfig.loggerProvider.debug(\n        'Remote config successfully fetched, but no values set for project, Session Replay capture enabled.',\n      );\n    }\n\n    // Remote config join acts somewhat like a left join between the remote and the local\n    // config. That is, remote config has precedence over local values as with sampling.\n    // However, non conflicting values will be added to the lists.\n    // Here's an example to illustrate:\n    //\n    // Remote config:   {'.selector1': 'MASK',   '.selector2': 'UNMASK'}\n    // Local config:    {'.selector1': 'UNMASK',                         '.selector3': 'MASK'}\n    //\n    // Resolved config: {'.selector1': 'MASK',   '.selector2': 'UNMASK', '.selector3': 'MASK'}\n    // config.privacyConfig = {\n    //   ...(config.privacyConfig ?? {}),\n    //   ...remotePrivacyConfig,\n    // };\n\n    if (remotePrivacyConfig) {\n      const localPrivacyConfig: PrivacyConfig = config.privacyConfig ?? {};\n\n      const joinedPrivacyConfig: Required<PrivacyConfig> & { blockSelector: string[] } = {\n        defaultMaskLevel: remotePrivacyConfig.defaultMaskLevel ?? localPrivacyConfig.defaultMaskLevel ?? 'medium',\n        blockSelector: [],\n        maskSelector: [],\n        unmaskSelector: [],\n      };\n\n      const privacyConfigSelectorMap = (privacyConfig: PrivacyConfig): Record<string, 'mask' | 'unmask' | 'block'> => {\n        const selectorMap: Record<string, 'mask' | 'unmask' | 'block'> = {};\n        if (typeof privacyConfig.blockSelector === 'string') {\n          privacyConfig.blockSelector = [privacyConfig.blockSelector];\n        }\n\n        for (const selector of privacyConfig.blockSelector ?? []) {\n          selectorMap[selector] = 'block';\n        }\n        for (const selector of privacyConfig.maskSelector ?? []) {\n          selectorMap[selector] = 'mask';\n        }\n        for (const selector of privacyConfig.unmaskSelector ?? []) {\n          selectorMap[selector] = 'unmask';\n        }\n        return selectorMap;\n      };\n\n      const selectorMap: Record<string, 'mask' | 'unmask' | 'block'> = {\n        ...privacyConfigSelectorMap(localPrivacyConfig),\n        ...privacyConfigSelectorMap(remotePrivacyConfig),\n      };\n\n      for (const [selector, selectorType] of Object.entries(selectorMap)) {\n        if (selectorType === 'mask') {\n          joinedPrivacyConfig.maskSelector.push(selector);\n        } else if (selectorType === 'block') {\n          joinedPrivacyConfig.blockSelector.push(selector);\n        } else if (selectorType === 'unmask') {\n          joinedPrivacyConfig.unmaskSelector.push(selector);\n        }\n      }\n\n      config.privacyConfig = removeInvalidSelectorsFromPrivacyConfig(\n        joinedPrivacyConfig,\n        this.localConfig.loggerProvider,\n      );\n    }\n\n    this.localConfig.loggerProvider.debug(\n      JSON.stringify({ name: 'session replay joined config', config: getDebugConfig(config) }, null, 2),\n    );\n\n    return {\n      localConfig: this.localConfig,\n      joinedConfig: config,\n      remoteConfig,\n    };\n  }\n}\n\nexport const createSessionReplayJoinedConfigGenerator = async (apiKey: string, options: SessionReplayOptions) => {\n  const localConfig = new SessionReplayLocalConfig(apiKey, options);\n  const remoteConfigFetch = await createRemoteConfigFetch<SessionReplayRemoteConfig>({\n    localConfig,\n    configKeys: ['sessionReplay'],\n  });\n\n  return new SessionReplayJoinedConfigGenerator(remoteConfigFetch, localConfig);\n};\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"file":"messages.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/messages.ts"],"sourcesContent":["export const UNEXPECTED_ERROR_MESSAGE = 'Unexpected error occurred';\nexport const UNEXPECTED_NETWORK_ERROR_MESSAGE = 'Network error occurred, event batch rejected';\nexport const MAX_RETRIES_EXCEEDED_MESSAGE = 'Session replay event batch rejected due to exceeded retry count';\nexport const STORAGE_FAILURE = 'Failed to store session replay events in IndexedDB';\nexport const MISSING_DEVICE_ID_MESSAGE = 'Session replay event batch not sent due to missing device ID';\nexport const MISSING_API_KEY_MESSAGE = 'Session replay event batch not sent due to missing api key';\n"],"names":[],"mappings":";;;;;;;;AAAO,IAAM,wBAAwB,GAAG,2BAA2B,CAAC;AAC7D,IAAM,gCAAgC,GAAG,8CAA8C,CAAC;AACxF,IAAM,4BAA4B,GAAG,iEAAiE,CAAC;AACvG,IAAM,eAAe,GAAG,oDAAoD,CAAC;AAC7E,IAAM,yBAAyB,GAAG,8DAA8D,CAAC;AACjG,IAAM,uBAAuB,GAAG,4DAA4D,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"file":"version.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/version.ts"],"sourcesContent":["// Autogenerated by `yarn version-file`. DO NOT EDIT\nexport const VERSION = '1.25.1';\n"],"names":[],"mappings":"AAAA,oDAAoD;;;;AAC7C,IAAM,OAAO,GAAG,QAAQ,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 819, "column": 0}, "map": {"version":3,"file":"track-destination.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/track-destination.ts"],"sourcesContent":["import { BaseTransport, ILogger, Status } from '@amplitude/analytics-core';\nimport { getCurrentUrl, getServerUrl } from './helpers';\nimport {\n  MAX_RETRIES_EXCEEDED_MESSAGE,\n  MISSING_API_KEY_MESSAGE,\n  MISSING_DEVICE_ID_MESSAGE,\n  UNEXPECTED_ERROR_MESSAGE,\n  UNEXPECTED_NETWORK_ERROR_MESSAGE,\n} from './messages';\nimport {\n  SessionReplayTrackDestination as AmplitudeSessionReplayTrackDestination,\n  SessionReplayDestination,\n  SessionReplayDestinationContext,\n} from './typings/session-replay';\nimport { VERSION } from './version';\nimport { MAX_URL_LENGTH, KB_SIZE } from './constants';\n\nexport type PayloadBatcher = ({ version, events }: { version: number; events: string[] }) => {\n  version: number;\n  events: unknown[];\n};\n\nexport class SessionReplayTrackDestination implements AmplitudeSessionReplayTrackDestination {\n  loggerProvider: ILogger;\n  storageKey = '';\n  trackServerUrl?: string;\n  retryTimeout = 1000;\n  private scheduled: ReturnType<typeof setTimeout> | null = null;\n  payloadBatcher: PayloadBatcher;\n  queue: SessionReplayDestinationContext[] = [];\n\n  constructor({\n    trackServerUrl,\n    loggerProvider,\n    payloadBatcher,\n  }: {\n    trackServerUrl?: string;\n    loggerProvider: ILogger;\n    payloadBatcher?: PayloadBatcher;\n  }) {\n    this.loggerProvider = loggerProvider;\n    this.payloadBatcher = payloadBatcher ? payloadBatcher : (payload) => payload;\n    this.trackServerUrl = trackServerUrl;\n  }\n\n  sendEventsList(destinationData: SessionReplayDestination) {\n    this.addToQueue({\n      ...destinationData,\n      attempts: 0,\n      timeout: 0,\n    });\n  }\n\n  addToQueue(...list: SessionReplayDestinationContext[]) {\n    const tryable = list.filter((context) => {\n      if (context.attempts < (context.flushMaxRetries || 0)) {\n        context.attempts += 1;\n        return true;\n      }\n      this.completeRequest({\n        context,\n        err: MAX_RETRIES_EXCEEDED_MESSAGE,\n      });\n      return false;\n    });\n    tryable.forEach((context) => {\n      this.queue = this.queue.concat(context);\n      if (context.timeout === 0) {\n        this.schedule(0);\n        return;\n      }\n\n      setTimeout(() => {\n        context.timeout = 0;\n        this.schedule(0);\n      }, context.timeout);\n    });\n  }\n\n  schedule(timeout: number) {\n    if (this.scheduled) return;\n    this.scheduled = setTimeout(() => {\n      void this.flush(true).then(() => {\n        if (this.queue.length > 0) {\n          this.schedule(timeout);\n        }\n      });\n    }, timeout);\n  }\n\n  async flush(useRetry = false) {\n    const list: SessionReplayDestinationContext[] = [];\n    const later: SessionReplayDestinationContext[] = [];\n    this.queue.forEach((context) => (context.timeout === 0 ? list.push(context) : later.push(context)));\n    this.queue = later;\n\n    if (this.scheduled) {\n      clearTimeout(this.scheduled);\n      this.scheduled = null;\n    }\n\n    await Promise.all(list.map((context) => this.send(context, useRetry)));\n  }\n\n  async send(context: SessionReplayDestinationContext, useRetry = true) {\n    const apiKey = context.apiKey;\n    if (!apiKey) {\n      return this.completeRequest({ context, err: MISSING_API_KEY_MESSAGE });\n    }\n    const deviceId = context.deviceId;\n    if (!deviceId) {\n      return this.completeRequest({ context, err: MISSING_DEVICE_ID_MESSAGE });\n    }\n    const url = getCurrentUrl();\n    const version = VERSION;\n    const sampleRate = context.sampleRate;\n    const urlParams = new URLSearchParams({\n      device_id: deviceId,\n      session_id: `${context.sessionId}`,\n      type: `${context.type}`,\n    });\n    const sessionReplayLibrary = `${context.version?.type || 'standalone'}/${context.version?.version || version}`;\n    const payload = this.payloadBatcher({\n      version: 1,\n      events: context.events,\n    });\n\n    if (payload.events.length === 0) {\n      this.completeRequest({ context });\n      return;\n    }\n\n    try {\n      const options: RequestInit = {\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: '*/*',\n          Authorization: `Bearer ${apiKey}`,\n          'X-Client-Version': version,\n          'X-Client-Library': sessionReplayLibrary,\n          'X-Client-Url': url.substring(0, MAX_URL_LENGTH), // limit url length to 1000 characters to avoid ELB 400 error\n          'X-Client-Sample-Rate': `${sampleRate}`,\n        },\n        body: JSON.stringify(payload),\n        method: 'POST',\n      };\n\n      const serverUrl = `${getServerUrl(context.serverZone, this.trackServerUrl)}?${urlParams.toString()}`;\n      const res = await fetch(serverUrl, options);\n      if (res === null) {\n        this.completeRequest({ context, err: UNEXPECTED_ERROR_MESSAGE });\n        return;\n      }\n      if (!useRetry) {\n        let responseBody = '';\n        try {\n          responseBody = JSON.stringify(res.body, null, 2);\n        } catch {\n          // to avoid crash, but don't care about the error, add comment to avoid empty block lint error\n        }\n        this.completeRequest({ context, success: `${res.status}: ${responseBody}` });\n      } else {\n        this.handleReponse(res.status, context);\n      }\n    } catch (e) {\n      this.completeRequest({ context, err: e as string });\n    }\n  }\n\n  handleReponse(status: number, context: SessionReplayDestinationContext) {\n    const parsedStatus = new BaseTransport().buildStatus(status);\n    switch (parsedStatus) {\n      case Status.Success:\n        this.handleSuccessResponse(context);\n        break;\n      case Status.Failed:\n        this.handleOtherResponse(context);\n        break;\n      default:\n        this.completeRequest({ context, err: UNEXPECTED_NETWORK_ERROR_MESSAGE });\n    }\n  }\n\n  handleSuccessResponse(context: SessionReplayDestinationContext) {\n    const sizeOfEventsList = Math.round(new Blob(context.events).size / KB_SIZE);\n    this.completeRequest({\n      context,\n      success: `Session replay event batch tracked successfully for session id ${context.sessionId}, size of events: ${sizeOfEventsList} KB`,\n    });\n  }\n\n  handleOtherResponse(context: SessionReplayDestinationContext) {\n    this.addToQueue({\n      ...context,\n      timeout: context.attempts * this.retryTimeout,\n    });\n  }\n\n  completeRequest({\n    context,\n    err,\n    success,\n  }: {\n    context: SessionReplayDestinationContext;\n    err?: string;\n    success?: string;\n  }) {\n    void context.onComplete();\n    if (err) {\n      this.loggerProvider.warn(err);\n    } else if (success) {\n      this.loggerProvider.log(success);\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1100, "column": 0}, "map": {"version":3,"file":"base-events-store.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/events/base-events-store.ts"],"sourcesContent":["import { MAX_EVENT_LIST_SIZE_IN_BYTES, MAX_INTERVAL, MIN_INTERVAL } from '../constants';\nimport { Events, EventsStore, SendingSequencesReturn } from '../typings/session-replay';\nimport { ILogger } from '@amplitude/analytics-core';\n\nexport type InstanceArgs = {\n  loggerProvider: ILogger;\n  minInterval?: number;\n  maxInterval?: number;\n  maxPersistedEventsSize?: number;\n};\n\nexport abstract class BaseEventsStore<KeyType> implements EventsStore<KeyType> {\n  protected readonly loggerProvider: ILogger;\n  private minInterval = MIN_INTERVAL;\n  private maxInterval = MAX_INTERVAL;\n  private maxPersistedEventsSize = MAX_EVENT_LIST_SIZE_IN_BYTES;\n  private interval = this.minInterval;\n  private _timeAtLastSplit = Date.now(); // Initialize this so we have a point of comparison when events are recorded\n\n  public get timeAtLastSplit() {\n    return this._timeAtLastSplit;\n  }\n\n  constructor(args: InstanceArgs) {\n    this.loggerProvider = args.loggerProvider;\n    this.minInterval = args.minInterval ?? this.minInterval;\n    this.maxInterval = args.maxInterval ?? this.maxInterval;\n    this.maxPersistedEventsSize = args.maxPersistedEventsSize ?? this.maxPersistedEventsSize;\n  }\n\n  abstract addEventToCurrentSequence(\n    sessionId: string | number,\n    event: string,\n  ): Promise<SendingSequencesReturn<KeyType> | undefined>;\n  abstract getSequencesToSend(): Promise<SendingSequencesReturn<KeyType>[] | undefined>;\n  abstract storeCurrentSequence(sessionId: number): Promise<SendingSequencesReturn<KeyType> | undefined>;\n  abstract storeSendingEvents(sessionId: string | number, events: Events): Promise<KeyType | undefined>;\n  abstract cleanUpSessionEventsStore(sessionId: number, sequenceId: KeyType): Promise<void>;\n\n  /**\n   * Determines whether to send the events list to the backend and start a new\n   * empty events list, based on the size of the list as well as the last time sent\n   * @param nextEventString\n   * @returns boolean\n   */\n  shouldSplitEventsList = (events: Events, nextEventString: string): boolean => {\n    const sizeOfNextEvent = new Blob([nextEventString]).size;\n    const sizeOfEventsList = new Blob(events).size;\n    if (sizeOfEventsList + sizeOfNextEvent >= this.maxPersistedEventsSize) {\n      return true;\n    }\n    if (Date.now() - this.timeAtLastSplit > this.interval && events.length) {\n      this.interval = Math.min(this.maxInterval, this.interval + this.minInterval);\n      this._timeAtLastSplit = Date.now();\n      return true;\n    }\n    return false;\n  };\n}\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,4BAA4B,EAAE,YAAY,EAAE,YAAY,EAAE,MAAM,cAAc,CAAC;;AAWxF,IAAA,kBAAA;IAYE,SAAA,gBAAY,IAAkB;QAA9B,IAAA,QAAA,IAAA,CAKC;;QAfO,IAAA,CAAA,WAAW,0LAAG,eAAY,CAAC;QAC3B,IAAA,CAAA,WAAW,0LAAG,eAAY,CAAC;QAC3B,IAAA,CAAA,sBAAsB,0LAAG,+BAA4B,CAAC;QACtD,IAAA,CAAA,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC;QAC5B,IAAA,CAAA,gBAAgB,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,4EAA4E;QAsBnH;;;;;WAKG,CACH,IAAA,CAAA,qBAAqB,GAAG,SAAC,MAAc,EAAE,eAAuB;YAC9D,IAAM,eAAe,GAAG,IAAI,IAAI,CAAC;gBAAC,eAAe;aAAC,CAAC,CAAC,IAAI,CAAC;YACzD,IAAM,gBAAgB,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC;YAC/C,IAAI,gBAAgB,GAAG,eAAe,IAAI,KAAI,CAAC,sBAAsB,EAAE;gBACrE,OAAO,IAAI,CAAC;aACb;YACD,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,MAAM,EAAE;gBACtE,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,WAAW,EAAE,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,WAAW,CAAC,CAAC;gBAC7E,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;gBACnC,OAAO,IAAI,CAAC;aACb;YACD,OAAO,KAAK,CAAC;QACf,CAAC,CAAC;QAjCA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;QAC1C,IAAI,CAAC,WAAW,GAAG,CAAA,KAAA,IAAI,CAAC,WAAW,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,IAAI,CAAC,WAAW,CAAC;QACxD,IAAI,CAAC,WAAW,GAAG,CAAA,KAAA,IAAI,CAAC,WAAW,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,IAAI,CAAC,WAAW,CAAC;QACxD,IAAI,CAAC,sBAAsB,GAAG,CAAA,KAAA,IAAI,CAAC,sBAAsB,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,IAAI,CAAC,sBAAsB,CAAC;IAC3F,CAAC;IATD,OAAA,cAAA,CAAW,gBAAA,SAAA,EAAA,iBAAe,EAAA;aAA1B;YACE,OAAO,IAAI,CAAC,gBAAgB,CAAC;QAC/B,CAAC;;;OAAA;IAqCH,OAAA,eAAC;AAAD,CAAC,AA/CD,IA+CC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1156, "column": 0}, "map": {"version":3,"file":"legacy-idb-types.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/events/legacy-idb-types.ts"],"sourcesContent":["import { SessionReplayRemoteConfig } from '../config/types';\nimport { Events } from '../typings/session-replay';\n\nexport enum RecordingStatus {\n  RECORDING = 'recording',\n  SENT = 'sent',\n}\n\nexport interface IDBStoreSequence {\n  events: Events;\n  status: RecordingStatus;\n}\n\ninterface IDBRemoteConfig {\n  config: SessionReplayRemoteConfig;\n  lastFetchedSessionId: number | undefined;\n}\nexport interface IDBStoreSession {\n  currentSequenceId: number;\n  sessionSequences: {\n    [sequenceId: number]: IDBStoreSequence;\n  };\n}\n\nexport interface IDBStore {\n  remoteConfig?: IDBRemoteConfig;\n  [sessionId: number]: IDBStoreSession;\n}\n"],"names":[],"mappings":";;;AAGA,IAAY,eAGX;AAHD,CAAA,SAAY,eAAe;IACzB,eAAA,CAAA,YAAA,GAAA,WAAuB,CAAA;IACvB,eAAA,CAAA,OAAA,GAAA,MAAa,CAAA;AACf,CAAC,EAHW,eAAe,IAAA,CAAf,eAAe,GAAA,CAAA,CAAA,GAG1B","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1170, "column": 0}, "map": {"version":3,"file":"events-idb-store.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/events/events-idb-store.ts"],"sourcesContent":["import { STORAGE_PREFIX, getGlobalScope } from '@amplitude/analytics-core';\nimport { DBSchema, IDBPDatabase, openDB } from 'idb';\nimport { STORAGE_FAILURE } from '../messages';\nimport { EventType, Events, SendingSequencesReturn } from '../typings/session-replay';\nimport { BaseEventsStore, InstanceArgs as BaseInstanceArgs } from './base-events-store';\nimport { IDBStore, IDBStoreSession, RecordingStatus } from './legacy-idb-types';\n\nexport const currentSequenceKey = 'sessionCurrentSequence';\nexport const sequencesToSendKey = 'sequencesToSend';\nexport const remoteConfigKey = 'remoteConfig';\n\nexport interface SessionReplayDB extends DBSchema {\n  sessionCurrentSequence: {\n    key: number;\n    value: Omit<SendingSequencesReturn<number>, 'sequenceId'>;\n  };\n  sequencesToSend: {\n    key: number;\n    value: Omit<SendingSequencesReturn<number>, 'sequenceId'>;\n    indexes: { sessionId: string | number };\n  };\n}\n\nexport const keyValDatabaseExists = function (): Promise<IDBDatabase | void> {\n  const globalScope = getGlobalScope();\n  return new Promise((resolve, reject) => {\n    if (!globalScope) {\n      return reject(new Error('Global scope not found'));\n    }\n\n    if (!globalScope.indexedDB) {\n      return reject(new Error('Session Replay: cannot find indexedDB'));\n    }\n\n    try {\n      const request = globalScope.indexedDB.open('keyval-store');\n      request.onupgradeneeded = function () {\n        if (request.result.version === 1) {\n          request.result.close();\n          request.transaction && request.transaction.abort();\n          globalScope.indexedDB.deleteDatabase('keyval-store');\n          resolve();\n        }\n      };\n      request.onsuccess = function () {\n        resolve(request.result);\n      };\n      request.onerror = function () {\n        reject(request.error);\n      };\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\n\nconst batchPromiseAll = async (promiseBatch: Promise<any>[]) => {\n  while (promiseBatch.length > 0) {\n    const chunkSize = 10;\n    const batch = promiseBatch.splice(0, chunkSize);\n    await Promise.all(batch);\n  }\n};\n\nexport const defineObjectStores = (db: IDBPDatabase<SessionReplayDB>) => {\n  let sequencesStore;\n  let currentSequenceStore;\n  if (!db.objectStoreNames.contains(currentSequenceKey)) {\n    currentSequenceStore = db.createObjectStore(currentSequenceKey, {\n      keyPath: 'sessionId',\n    });\n  }\n  if (!db.objectStoreNames.contains(sequencesToSendKey)) {\n    sequencesStore = db.createObjectStore(sequencesToSendKey, {\n      keyPath: 'sequenceId',\n      autoIncrement: true,\n    });\n    sequencesStore.createIndex('sessionId', 'sessionId');\n  }\n  return {\n    sequencesStore,\n    currentSequenceStore,\n  };\n};\n\nexport const createStore = async (dbName: string) => {\n  return await openDB<SessionReplayDB>(dbName, 1, {\n    upgrade: defineObjectStores,\n  });\n};\n\ntype InstanceArgs = {\n  apiKey: string;\n  db: IDBPDatabase<SessionReplayDB>;\n} & BaseInstanceArgs;\n\nexport class SessionReplayEventsIDBStore extends BaseEventsStore<number> {\n  private readonly apiKey: string;\n  private readonly db: IDBPDatabase<SessionReplayDB>;\n\n  constructor(args: InstanceArgs) {\n    super(args);\n    this.apiKey = args.apiKey;\n    this.db = args.db;\n  }\n\n  static async new(\n    type: EventType,\n    args: Omit<InstanceArgs, 'db'>,\n    sessionId?: string | number,\n  ): Promise<SessionReplayEventsIDBStore | undefined> {\n    try {\n      const dbSuffix = type === 'replay' ? '' : `_${type}`;\n      const dbName = `${args.apiKey.substring(0, 10)}_amp_session_replay_events${dbSuffix}`;\n      const db = await createStore(dbName);\n      const eventsIDBStore = new SessionReplayEventsIDBStore({\n        ...args,\n        db,\n      });\n      await eventsIDBStore.transitionFromKeyValStore(sessionId);\n      return eventsIDBStore;\n    } catch (e) {\n      args.loggerProvider.warn(`${STORAGE_FAILURE}: ${e as string}`);\n    }\n    return;\n  }\n\n  async getCurrentSequenceEvents(sessionId?: number) {\n    if (sessionId) {\n      const events = await this.db.get('sessionCurrentSequence', sessionId);\n      if (!events) {\n        return undefined;\n      }\n      return [events];\n    }\n\n    const allEvents = [];\n    for (const events of await this.db.getAll('sessionCurrentSequence')) {\n      allEvents.push(events);\n    }\n\n    return allEvents;\n  }\n\n  getSequencesToSend = async (): Promise<SendingSequencesReturn<number>[] | undefined> => {\n    try {\n      const sequences: SendingSequencesReturn<number>[] = [];\n      let cursor = await this.db.transaction('sequencesToSend').store.openCursor();\n      while (cursor) {\n        const { sessionId, events } = cursor.value;\n        sequences.push({\n          events,\n          sequenceId: cursor.key,\n          sessionId,\n        });\n        cursor = await cursor.continue();\n      }\n\n      return sequences;\n    } catch (e) {\n      this.loggerProvider.warn(`${STORAGE_FAILURE}: ${e as string}`);\n    }\n    return undefined;\n  };\n\n  storeCurrentSequence = async (sessionId: number) => {\n    try {\n      const currentSequenceData = await this.db.get<'sessionCurrentSequence'>(currentSequenceKey, sessionId);\n      if (!currentSequenceData) {\n        return undefined;\n      }\n\n      const sequenceId = await this.db.put<'sequencesToSend'>(sequencesToSendKey, {\n        sessionId: sessionId,\n        events: currentSequenceData.events,\n      });\n\n      await this.db.put<'sessionCurrentSequence'>(currentSequenceKey, {\n        sessionId,\n        events: [],\n      });\n\n      return {\n        ...currentSequenceData,\n        sessionId,\n        sequenceId,\n      };\n    } catch (e) {\n      this.loggerProvider.warn(`${STORAGE_FAILURE}: ${e as string}`);\n    }\n    return undefined;\n  };\n\n  addEventToCurrentSequence = async (sessionId: number, event: string) => {\n    try {\n      const tx = this.db.transaction<'sessionCurrentSequence', 'readwrite'>(currentSequenceKey, 'readwrite');\n      const sequenceEvents = await tx.store.get(sessionId);\n      if (!sequenceEvents) {\n        await tx.store.put({ sessionId, events: [event] });\n        return;\n      }\n      let eventsToSend;\n      if (this.shouldSplitEventsList(sequenceEvents.events, event)) {\n        eventsToSend = sequenceEvents.events;\n        // set store to empty array\n        await tx.store.put({ sessionId, events: [event] });\n      } else {\n        // add event to array\n        const updatedEvents = sequenceEvents.events.concat(event);\n        await tx.store.put({ sessionId, events: updatedEvents });\n      }\n\n      await tx.done;\n      if (!eventsToSend) {\n        return undefined;\n      }\n\n      const sequenceId = await this.storeSendingEvents(sessionId, eventsToSend);\n\n      if (!sequenceId) {\n        return undefined;\n      }\n\n      return {\n        events: eventsToSend,\n        sessionId,\n        sequenceId,\n      };\n    } catch (e) {\n      this.loggerProvider.warn(`${STORAGE_FAILURE}: ${e as string}`);\n    }\n    return undefined;\n  };\n\n  storeSendingEvents = async (sessionId: number, events: Events) => {\n    try {\n      const sequenceId = await this.db.put<'sequencesToSend'>(sequencesToSendKey, {\n        sessionId: sessionId,\n        events: events,\n      });\n      return sequenceId;\n    } catch (e) {\n      this.loggerProvider.warn(`${STORAGE_FAILURE}: ${e as string}`);\n    }\n    return undefined;\n  };\n\n  cleanUpSessionEventsStore = async (_sessionId: number, sequenceId?: number) => {\n    if (!sequenceId) {\n      return;\n    }\n    try {\n      await this.db.delete<'sequencesToSend'>(sequencesToSendKey, sequenceId);\n    } catch (e) {\n      this.loggerProvider.warn(`${STORAGE_FAILURE}: ${e as string}`);\n    }\n  };\n\n  transitionFromKeyValStore = async (sessionId?: string | number) => {\n    try {\n      const keyValDb = await keyValDatabaseExists();\n      if (!keyValDb) {\n        return;\n      }\n\n      const transitionCurrentSessionSequences = async (numericSessionId: number, sessionStore: IDBStoreSession) => {\n        const currentSessionSequences = sessionStore.sessionSequences;\n        const promisesToBatch: Promise<number | SendingSequencesReturn<number> | undefined>[] = [];\n\n        Object.keys(currentSessionSequences).forEach((sequenceId) => {\n          const numericSequenceId = parseInt(sequenceId, 10);\n          const sequence = currentSessionSequences[numericSequenceId];\n          if (numericSequenceId === sessionStore.currentSequenceId) {\n            const eventAddPromises: Promise<SendingSequencesReturn<number> | undefined>[] = sequence.events.map(\n              async (event) => this.addEventToCurrentSequence(numericSessionId, event),\n            );\n            promisesToBatch.push(...eventAddPromises);\n          } else if (sequence.status !== RecordingStatus.SENT) {\n            promisesToBatch.push(this.storeSendingEvents(numericSessionId, sequence.events));\n          }\n        });\n\n        await batchPromiseAll(promisesToBatch);\n      };\n\n      const storageKey = `${STORAGE_PREFIX}_${this.apiKey.substring(0, 10)}`;\n      try {\n        const getAllRequest = keyValDb.transaction('keyval').objectStore('keyval').getAll(storageKey);\n        const transitionPromise = new Promise<void>((resolve) => {\n          getAllRequest.onsuccess = async (e) => {\n            const storedReplaySessionContextList = e && ((e.target as IDBRequest).result as IDBStore[]);\n            const storedReplaySessionContexts = storedReplaySessionContextList && storedReplaySessionContextList[0];\n            if (storedReplaySessionContexts) {\n              const promisesToBatch: Promise<any>[] = [];\n\n              Object.keys(storedReplaySessionContexts).forEach((storedSessionId) => {\n                const numericSessionId = parseInt(storedSessionId, 10);\n                const oldSessionStore = storedReplaySessionContexts[numericSessionId];\n\n                if (sessionId === numericSessionId) {\n                  promisesToBatch.push(transitionCurrentSessionSequences(numericSessionId, oldSessionStore));\n                } else {\n                  const oldSessionSequences = oldSessionStore.sessionSequences;\n                  Object.keys(oldSessionSequences).forEach((sequenceId) => {\n                    const numericSequenceId = parseInt(sequenceId, 10);\n                    if (oldSessionSequences[numericSequenceId].status !== RecordingStatus.SENT) {\n                      promisesToBatch.push(\n                        this.storeSendingEvents(numericSessionId, oldSessionSequences[numericSequenceId].events),\n                      );\n                    }\n                  });\n                }\n              });\n\n              await batchPromiseAll(promisesToBatch);\n            }\n            resolve();\n          };\n        });\n\n        await transitionPromise;\n        const globalScope = getGlobalScope();\n        if (globalScope) {\n          globalScope.indexedDB.deleteDatabase('keyval-store');\n        }\n      } catch (e) {\n        this.loggerProvider.warn(`Failed to transition session replay events from keyval to new store: ${e as string}`);\n      }\n    } catch (e) {\n      this.loggerProvider.warn(\n        `Failed to access keyval store: ${\n          e as string\n        }. For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices`,\n      );\n    }\n  };\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1952, "column": 0}, "map": {"version":3,"file":"events-memory-store.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/events/events-memory-store.ts"],"sourcesContent":["import { Events, SendingSequencesReturn } from '../typings/session-replay';\nimport { BaseEventsStore } from './base-events-store';\n\nexport class InMemoryEventsStore extends BaseEventsStore<number> {\n  private finalizedSequences: Record<number, { sessionId: string | number; events: string[] }> = {};\n  private sequences: Record<string | number, string[]> = {};\n  private sequenceId = 0;\n\n  private resetCurrentSequence(sessionId: string | number) {\n    this.sequences[sessionId] = [];\n  }\n\n  private addSequence(sessionId: string | number): SendingSequencesReturn<number> {\n    const sequenceId = this.sequenceId++;\n    const events = [...this.sequences[sessionId]];\n    this.finalizedSequences[sequenceId] = { sessionId, events };\n    this.resetCurrentSequence(sessionId);\n    return { sequenceId, events, sessionId };\n  }\n\n  async getSequencesToSend(): Promise<SendingSequencesReturn<number>[] | undefined> {\n    return Object.entries(this.finalizedSequences).map(([sequenceId, { sessionId, events }]) => ({\n      sequenceId: Number(sequenceId),\n      sessionId,\n      events,\n    }));\n  }\n\n  async storeCurrentSequence(sessionId: string | number): Promise<SendingSequencesReturn<number> | undefined> {\n    if (!this.sequences[sessionId]) {\n      return undefined;\n    }\n    return this.addSequence(sessionId);\n  }\n\n  async addEventToCurrentSequence(\n    sessionId: number,\n    event: string,\n  ): Promise<SendingSequencesReturn<number> | undefined> {\n    if (!this.sequences[sessionId]) {\n      this.resetCurrentSequence(sessionId);\n    }\n\n    let sequenceReturn: SendingSequencesReturn<number> | undefined;\n    if (this.shouldSplitEventsList(this.sequences[sessionId], event)) {\n      sequenceReturn = this.addSequence(sessionId);\n    }\n\n    this.sequences[sessionId].push(event);\n\n    return sequenceReturn;\n  }\n\n  async storeSendingEvents(sessionId: number, events: Events): Promise<number | undefined> {\n    this.finalizedSequences[this.sequenceId] = { sessionId, events };\n\n    return this.sequenceId++;\n  }\n\n  async cleanUpSessionEventsStore(_sessionId: number, sequenceId?: number): Promise<void> {\n    if (sequenceId !== undefined) {\n      delete this.finalizedSequences[sequenceId];\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2072, "column": 0}, "map": {"version":3,"file":"events-manager.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/events/events-manager.ts"],"sourcesContent":["import {\n  SessionReplayEventsManager as AmplitudeSessionReplayEventsManager,\n  EventsStore,\n  EventType,\n  StoreType,\n} from '../typings/session-replay';\n\nimport { SessionReplayJoinedConfig } from '../config/types';\nimport { getStorageSize } from '../helpers';\nimport { PayloadBatcher, SessionReplayTrackDestination } from '../track-destination';\nimport { SessionReplayEventsIDBStore } from './events-idb-store';\nimport { InMemoryEventsStore } from './events-memory-store';\n\nexport const createEventsManager = async <Type extends EventType>({\n  config,\n  sessionId,\n  minInterval,\n  maxInterval,\n  type,\n  payloadBatcher,\n  storeType,\n}: {\n  config: SessionReplayJoinedConfig;\n  type: Type;\n  minInterval?: number;\n  maxInterval?: number;\n  sessionId?: string | number;\n  payloadBatcher?: PayloadBatcher;\n  storeType: StoreType;\n}): Promise<AmplitudeSessionReplayEventsManager<Type, string>> => {\n  const trackDestination = new SessionReplayTrackDestination({\n    ...config,\n    loggerProvider: config.loggerProvider,\n    payloadBatcher,\n  });\n\n  const getMemoryStore = (): EventsStore<number> => {\n    return new InMemoryEventsStore({\n      loggerProvider: config.loggerProvider,\n      maxInterval,\n      minInterval,\n    });\n  };\n\n  const getIdbStoreOrFallback = async (): Promise<EventsStore<number>> => {\n    const store = await SessionReplayEventsIDBStore.new(\n      type,\n      {\n        loggerProvider: config.loggerProvider,\n        minInterval,\n        maxInterval,\n        apiKey: config.apiKey,\n      },\n      sessionId,\n    );\n    config.loggerProvider.log('Failed to initialize idb store, falling back to memory store.');\n    return store ?? getMemoryStore();\n  };\n\n  const store: EventsStore<number> = storeType === 'idb' ? await getIdbStoreOrFallback() : getMemoryStore();\n\n  /**\n   * Immediately sends events to the track destination.\n   */\n  const sendEventsList = ({\n    events,\n    sessionId,\n    deviceId,\n    sequenceId,\n  }: {\n    events: string[];\n    sessionId: string | number;\n    deviceId: string;\n    sequenceId?: number;\n  }) => {\n    if (config.debugMode) {\n      getStorageSize()\n        .then(({ totalStorageSize, percentOfQuota, usageDetails }) => {\n          config.loggerProvider.debug(\n            `Total storage size: ${totalStorageSize} KB, percentage of quota: ${percentOfQuota}%, usage details: ${usageDetails}`,\n          );\n        })\n        .catch(() => {\n          // swallow error\n        });\n    }\n\n    trackDestination.sendEventsList({\n      events: events,\n      sessionId: sessionId,\n      flushMaxRetries: config.flushMaxRetries,\n      apiKey: config.apiKey,\n      deviceId: deviceId,\n      sampleRate: config.sampleRate,\n      serverZone: config.serverZone,\n      version: config.version,\n      type,\n      onComplete: async () => {\n        await store.cleanUpSessionEventsStore(sessionId, sequenceId);\n        return;\n      },\n    });\n  };\n\n  const sendCurrentSequenceEvents = ({ sessionId, deviceId }: { sessionId: number; deviceId: string }) => {\n    store\n      .storeCurrentSequence(sessionId)\n      .then((currentSequence) => {\n        if (currentSequence) {\n          sendEventsList({\n            sequenceId: currentSequence.sequenceId,\n            events: currentSequence.events,\n            sessionId: currentSequence.sessionId,\n            deviceId,\n          });\n        }\n      })\n      .catch((e) => {\n        config.loggerProvider.warn('Failed to get current sequence of session replay events for session:', e);\n      });\n  };\n\n  const sendStoredEvents = async ({ deviceId }: { deviceId: string }) => {\n    const sequencesToSend = await store.getSequencesToSend();\n    sequencesToSend &&\n      sequencesToSend.forEach((sequence) => {\n        sendEventsList({\n          sequenceId: sequence.sequenceId,\n          events: sequence.events,\n          sessionId: sequence.sessionId,\n          deviceId,\n        });\n      });\n  };\n\n  const addEvent = ({\n    event,\n    sessionId,\n    deviceId,\n  }: {\n    event: { type: Type; data: string };\n    sessionId: number;\n    deviceId: string;\n  }) => {\n    store\n      .addEventToCurrentSequence(sessionId, event.data)\n      .then((sequenceToSend) => {\n        return (\n          sequenceToSend &&\n          sendEventsList({\n            sequenceId: sequenceToSend.sequenceId,\n            events: sequenceToSend.events,\n            sessionId: sequenceToSend.sessionId,\n            deviceId,\n          })\n        );\n      })\n      .catch((e) => {\n        config.loggerProvider.warn('Failed to add event to session replay capture:', e);\n      });\n  };\n\n  async function flush(useRetry = false) {\n    return trackDestination.flush(useRetry);\n  }\n\n  return {\n    sendCurrentSequenceEvents,\n    addEvent,\n    sendStoredEvents,\n    flush,\n  };\n};\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2276, "column": 0}, "map": {"version":3,"file":"multi-manager.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/events/multi-manager.ts"],"sourcesContent":["import {\n  SessionReplayEventsManager as AmplitudeSessionReplayEventsManager,\n  EventsManagerWithType,\n} from '../typings/session-replay';\n\n/**\n * \"Registers\" events managers internally. When an event is added this class routes the event to the correct\n * manager. For all send or flush methods this will invoke the event for all registered managers.\n */\nexport class MultiEventManager<EventType, EventDataType>\n  implements AmplitudeSessionReplayEventsManager<EventType, EventDataType>\n{\n  private managers: Map<EventType, AmplitudeSessionReplayEventsManager<EventType, EventDataType>>;\n\n  constructor(...managers: EventsManagerWithType<EventType, EventDataType>[]) {\n    const managersMap = new Map<EventType, AmplitudeSessionReplayEventsManager<EventType, EventDataType>>();\n    managers.forEach((t) => {\n      managersMap.set(t.name, t.manager);\n    });\n    this.managers = managersMap;\n  }\n\n  async sendStoredEvents(opts: { deviceId: string }): Promise<void> {\n    const promises: Promise<void>[] = [];\n    this.managers.forEach((manager) => {\n      promises.push(manager.sendStoredEvents(opts));\n    });\n    await Promise.all(promises);\n  }\n\n  addEvent({\n    sessionId,\n    event,\n    deviceId,\n  }: {\n    sessionId: number;\n    event: { type: EventType; data: EventDataType };\n    deviceId: string;\n  }): void {\n    this.managers.get(event.type)?.addEvent({ sessionId, event, deviceId });\n  }\n\n  sendCurrentSequenceEvents({ sessionId, deviceId }: { sessionId: number; deviceId: string }): void {\n    this.managers.forEach((manager) => {\n      manager.sendCurrentSequenceEvents({ sessionId, deviceId });\n    });\n  }\n\n  async flush(useRetry?: boolean | undefined): Promise<void> {\n    const promises: Promise<void>[] = [];\n    this.managers.forEach((manager) => {\n      promises.push(manager.flush(useRetry));\n    });\n    await Promise.all(promises);\n  }\n}\n"],"names":[],"mappings":";;;;;AAKA;;;GAGG,CACH,IAAA,oBAAA;IAKE,SAAA;QAAY,IAAA,WAAA,EAAA,CAA8D;YAA9D,IAAA,KAAA,CAA8D,EAA9D,KAAA,UAAA,MAA8D,EAA9D,IAA8D,CAAA;YAA9D,QAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAA8D;;QACxE,IAAM,WAAW,GAAG,IAAI,GAAG,EAA4E,CAAC;QACxG,QAAQ,CAAC,OAAO,CAAC,SAAC,CAAC;YACjB,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;IAC9B,CAAC;IAEK,kBAAA,SAAA,CAAA,gBAAgB,GAAtB,SAAuB,IAA0B;;;;;;wBACzC,QAAQ,GAAoB,EAAE,CAAC;wBACrC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAC,OAAO;4BAC5B,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;wBAChD,CAAC,CAAC,CAAC;wBACH,OAAA;4BAAA,EAAA,OAAA;4BAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;yBAAA,CAAA;;wBAA3B,GAAA,IAAA,EAA2B,CAAC;;;;;;;KAC7B;IAED,kBAAA,SAAA,CAAA,QAAQ,GAAR,SAAS,EAQR;;YAPC,SAAS,GAAA,GAAA,SAAA,EACT,KAAK,GAAA,GAAA,KAAA,EACL,QAAQ,GAAA,GAAA,QAAA;QAMR,CAAA,KAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,QAAQ,CAAC;YAAE,SAAS,EAAA,SAAA;YAAE,KAAK,EAAA,KAAA;YAAE,QAAQ,EAAA,QAAA;QAAA,CAAE,CAAC,CAAC;IAC1E,CAAC;IAED,kBAAA,SAAA,CAAA,yBAAyB,GAAzB,SAA0B,EAAgE;YAA9D,SAAS,GAAA,GAAA,SAAA,EAAE,QAAQ,GAAA,GAAA,QAAA;QAC7C,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAC,OAAO;YAC5B,OAAO,CAAC,yBAAyB,CAAC;gBAAE,SAAS,EAAA,SAAA;gBAAE,QAAQ,EAAA,QAAA;YAAA,CAAE,CAAC,CAAC;QAC7D,CAAC,CAAC,CAAC;IACL,CAAC;IAEK,kBAAA,SAAA,CAAA,KAAK,GAAX,SAAY,QAA8B;;;;;;wBAClC,QAAQ,GAAoB,EAAE,CAAC;wBACrC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAC,OAAO;4BAC5B,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACzC,CAAC,CAAC,CAAC;wBACH,OAAA;4BAAA,EAAA,OAAA;4BAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;yBAAA,CAAA;;wBAA3B,GAAA,IAAA,EAA2B,CAAC;;;;;;;KAC7B;IACH,OAAA,iBAAC;AAAD,CAAC,AA9CD,IA8CC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2370, "column": 0}, "map": {"version":3,"file":"rrweb.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/utils/rrweb.ts"],"sourcesContent":["import { getGlobalScope } from '@amplitude/analytics-core';\nimport dom from '@amplitude/rrweb-utils';\nimport type { eventWithTime, scrollCallback } from '@amplitude/rrweb-types';\n\n// These functions are not exposed in rrweb package, so we will define it here to use\n// Ignoring this function since this is copied from rrweb\n/* istanbul ignore next */\nexport function getWindowScroll(win: Window) {\n  const doc = win.document;\n  return {\n    left: doc.scrollingElement\n      ? doc.scrollingElement.scrollLeft\n      : win.pageXOffset !== undefined\n      ? win.pageXOffset\n      : doc.documentElement.scrollLeft ||\n        (doc?.body && dom.parentElement(doc.body)?.scrollLeft) ||\n        doc?.body?.scrollLeft ||\n        0,\n    top: doc.scrollingElement\n      ? doc.scrollingElement.scrollTop\n      : win.pageYOffset !== undefined\n      ? win.pageYOffset\n      : doc?.documentElement.scrollTop ||\n        (doc?.body && dom.parentElement(doc.body)?.scrollTop) ||\n        doc?.body?.scrollTop ||\n        0,\n  };\n}\n\nexport function getWindowHeight(): number {\n  const globalScope = getGlobalScope();\n  return (\n    globalScope?.innerHeight ||\n    (document.documentElement && document.documentElement.clientHeight) ||\n    (document.body && document.body.clientHeight) ||\n    0\n  );\n}\n\nexport function getWindowWidth(): number {\n  const globalScope = getGlobalScope();\n  return (\n    globalScope?.innerWidth ||\n    (document.documentElement && document.documentElement.clientWidth) ||\n    (document.body && document.body.clientWidth) ||\n    0\n  );\n}\n\nexport type Mirror = {\n  getNode: (id: number) => Node | null;\n};\n\nexport type RecordFunction = {\n  (options: {\n    emit: (event: eventWithTime) => void;\n    inlineStylesheet?: boolean;\n    hooks?: {\n      mouseInteraction?: any;\n      scroll?: scrollCallback;\n    };\n    maskAllInputs?: boolean;\n    maskTextClass?: string;\n    blockClass?: string;\n    blockSelector?: string;\n    maskInputFn?: (text: string, element: HTMLElement | null) => string;\n    maskTextFn?: (text: string, element: HTMLElement | null) => string;\n    maskTextSelector?: string;\n    recordCanvas?: boolean;\n    errorHandler?: (error: unknown) => boolean;\n    plugins?: any[];\n    applyBackgroundColorToBlockedElements?: boolean;\n  }): (() => void) | undefined;\n  addCustomEvent: (eventName: string, eventData: any) => void;\n  mirror: Mirror;\n};\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,2BAA2B,CAAC;AAC3D,OAAO,GAAG,MAAM,wBAAwB,CAAC;;;AAMnC,SAAU,eAAe,CAAC,GAAW;;IACzC,IAAM,GAAG,GAAG,GAAG,CAAC,QAAQ,CAAC;IACzB,OAAO;QACL,IAAI,EAAE,GAAG,CAAC,gBAAgB,GACtB,GAAG,CAAC,gBAAgB,CAAC,UAAU,GAC/B,GAAG,CAAC,WAAW,KAAK,SAAS,GAC7B,GAAG,CAAC,WAAW,GACf,GAAG,CAAC,eAAe,CAAC,UAAU,IAC7B,CAAA,GAAG,KAAA,QAAH,GAAG,KAAA,KAAA,IAAA,KAAA,IAAH,GAAG,CAAE,IAAI,KAAA,CAAI,CAAA,6KAAA,UAAG,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,UAAU,CAAA,CAAC,IACtD,CAAA,KAAA,GAAG,KAAA,QAAH,GAAG,KAAA,KAAA,IAAA,KAAA,IAAH,GAAG,CAAE,IAAI,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,UAAU,CAAA,IACrB,CAAC;QACL,GAAG,EAAE,GAAG,CAAC,gBAAgB,GACrB,GAAG,CAAC,gBAAgB,CAAC,SAAS,GAC9B,GAAG,CAAC,WAAW,KAAK,SAAS,GAC7B,GAAG,CAAC,WAAW,GACf,CAAA,GAAG,KAAA,QAAH,GAAG,KAAA,KAAA,IAAA,KAAA,IAAH,GAAG,CAAE,eAAe,CAAC,SAAS,KAC7B,CAAA,GAAG,KAAA,QAAH,GAAG,KAAA,KAAA,IAAA,KAAA,IAAH,GAAG,CAAE,IAAI,KAAA,CAAI,CAAA,6KAAA,UAAG,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,SAAS,CAAA,CAAC,IACrD,CAAA,KAAA,GAAG,KAAA,QAAH,GAAG,KAAA,KAAA,IAAA,KAAA,IAAH,GAAG,CAAE,IAAI,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,SAAS,CAAA,IACpB,CAAC;KACN,CAAC;AACJ,CAAC;AAEK,SAAU,eAAe;IAC7B,IAAM,WAAW,yLAAG,iBAAA,AAAc,EAAE,CAAC;IACrC,OAAO,AACL,CAAA,WAAW,KAAA,QAAX,WAAW,KAAA,KAAA,IAAA,KAAA,IAAX,WAAW,CAAE,WAAW,KACvB,QAAQ,CAAC,eAAe,IAAI,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC,GAClE,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,GAC7C,CAAC,CACF,CAAC;AACJ,CAAC;AAEK,SAAU,cAAc;IAC5B,IAAM,WAAW,yLAAG,iBAAA,AAAc,EAAE,CAAC;IACrC,OAAO,AACL,CAAA,WAAW,KAAA,QAAX,WAAW,KAAA,KAAA,IAAA,KAAA,IAAX,WAAW,CAAE,UAAU,KACtB,QAAQ,CAAC,eAAe,IAAI,QAAQ,CAAC,eAAe,CAAC,WAAW,CAAC,GACjE,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAC5C,CAAC,CACF,CAAC;AACJ,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2401, "column": 0}, "map": {"version":3,"file":"finder.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/libs/finder.ts"],"sourcesContent":["/* istanbul ignore file */\n\n// DO NOT EDIT (unless you know what you're doing)\n// Taken directly from git@github.com:antonmedv/finder.git@77d33158440dfffee4a300d2975b43a5283004ab\n\n/* eslint-disable @typescript-eslint/no-unnecessary-type-assertion */\n/* eslint-disable prefer-const */\n\n// License: MIT\n// Author: Anton Medvedev <anton@medv.io>\n// Source: https://github.com/antonmedv/finder\n\ntype Knot = {\n  name: string;\n  penalty: number;\n  level?: number;\n};\n\ntype Path = Knot[];\n\nexport type Options = {\n  root: Element;\n  idName: (name: string) => boolean;\n  className: (name: string) => boolean;\n  tagName: (name: string) => boolean;\n  attr: (name: string, value: string) => boolean;\n  seedMinLength: number;\n  optimizedMinLength: number;\n  threshold: number;\n  maxNumberOfTries: number;\n  timeoutMs: number | undefined;\n};\n\nlet config: Options;\nlet rootDocument: Document | Element;\nlet start: Date;\n\nexport function finder(input: Element, options?: Partial<Options>): string {\n  start = new Date();\n  if (input.nodeType !== Node.ELEMENT_NODE) {\n    throw new Error(`Can't generate CSS selector for non-element node type.`);\n  }\n  if ('html' === input.tagName.toLowerCase()) {\n    return 'html';\n  }\n  const defaults: Options = {\n    root: document.body,\n    idName: (_name: string) => true,\n    className: (_name: string) => true,\n    tagName: (_name: string) => true,\n    attr: (_name: string, _value: string) => false,\n    seedMinLength: 1,\n    optimizedMinLength: 2,\n    threshold: 1000,\n    maxNumberOfTries: 10000,\n    timeoutMs: undefined,\n  };\n\n  config = { ...defaults, ...options };\n  rootDocument = findRootDocument(config.root, defaults);\n\n  let path = bottomUpSearch(input, 'all', () =>\n    bottomUpSearch(input, 'two', () => bottomUpSearch(input, 'one', () => bottomUpSearch(input, 'none'))),\n  );\n\n  if (path) {\n    const optimized = sort(optimize(path, input));\n    if (optimized.length > 0) {\n      path = optimized[0];\n    }\n    return selector(path);\n  } else {\n    throw new Error(`Selector was not found.`);\n  }\n}\n\nfunction findRootDocument(rootNode: Element | Document, defaults: Options) {\n  if (rootNode.nodeType === Node.DOCUMENT_NODE) {\n    return rootNode;\n  }\n  if (rootNode === defaults.root) {\n    return rootNode.ownerDocument as Document;\n  }\n  return rootNode;\n}\n\nfunction bottomUpSearch(\n  input: Element,\n  limit: 'all' | 'two' | 'one' | 'none',\n  fallback?: () => Path | null,\n): Path | null {\n  let path: Path | null = null;\n  let stack: Knot[][] = [];\n  let current: Element | null = input;\n  let i = 0;\n  while (current) {\n    const elapsedTime = new Date().getTime() - start.getTime();\n    if (config.timeoutMs !== undefined && elapsedTime > config.timeoutMs) {\n      throw new Error(`Timeout: Can't find a unique selector after ${elapsedTime}ms`);\n    }\n    let level: Knot[] = maybe(id(current)) ||\n      maybe(...attr(current)) ||\n      maybe(...classNames(current)) ||\n      maybe(tagName(current)) || [any()];\n    const nth = index(current);\n    if (limit == 'all') {\n      if (nth) {\n        level = level.concat(level.filter(dispensableNth).map((node) => nthChild(node, nth)));\n      }\n    } else if (limit == 'two') {\n      level = level.slice(0, 1);\n      if (nth) {\n        level = level.concat(level.filter(dispensableNth).map((node) => nthChild(node, nth)));\n      }\n    } else if (limit == 'one') {\n      const [node] = (level = level.slice(0, 1));\n      if (nth && dispensableNth(node)) {\n        level = [nthChild(node, nth)];\n      }\n    } else if (limit == 'none') {\n      level = [any()];\n      if (nth) {\n        level = [nthChild(level[0], nth)];\n      }\n    }\n    for (let node of level) {\n      node.level = i;\n    }\n    stack.push(level);\n    if (stack.length >= config.seedMinLength) {\n      path = findUniquePath(stack, fallback);\n      if (path) {\n        break;\n      }\n    }\n    current = current.parentElement;\n    i++;\n  }\n  if (!path) {\n    path = findUniquePath(stack, fallback);\n  }\n  if (!path && fallback) {\n    return fallback();\n  }\n  return path;\n}\n\nfunction findUniquePath(stack: Knot[][], fallback?: () => Path | null): Path | null {\n  const paths = sort(combinations(stack));\n  if (paths.length > config.threshold) {\n    return fallback ? fallback() : null;\n  }\n  for (let candidate of paths) {\n    if (unique(candidate)) {\n      return candidate;\n    }\n  }\n  return null;\n}\n\nfunction selector(path: Path): string {\n  let node = path[0];\n  let query = node.name;\n  for (let i = 1; i < path.length; i++) {\n    const level = path[i].level || 0;\n    if (node.level === level - 1) {\n      query = `${path[i].name} > ${query}`;\n    } else {\n      query = `${path[i].name} ${query}`;\n    }\n    node = path[i];\n  }\n  return query;\n}\n\nfunction penalty(path: Path): number {\n  return path.map((node) => node.penalty).reduce((acc, i) => acc + i, 0);\n}\n\nfunction unique(path: Path) {\n  const css = selector(path);\n  switch (rootDocument.querySelectorAll(css).length) {\n    case 0:\n      throw new Error(`Can't select any node with this selector: ${css}`);\n    case 1:\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction id(input: Element): Knot | null {\n  const elementId = input.getAttribute('id');\n  if (elementId && config.idName(elementId)) {\n    return {\n      name: '#' + CSS.escape(elementId),\n      penalty: 0,\n    };\n  }\n  return null;\n}\n\nfunction attr(input: Element): Knot[] {\n  const attrs = Array.from(input.attributes).filter((attr) => config.attr(attr.name, attr.value));\n  return attrs.map(\n    (attr): Knot => ({\n      name: `[${CSS.escape(attr.name)}=\"${CSS.escape(attr.value)}\"]`,\n      penalty: 0.5,\n    }),\n  );\n}\n\nfunction classNames(input: Element): Knot[] {\n  const names = Array.from(input.classList).filter(config.className);\n  return names.map(\n    (name): Knot => ({\n      name: '.' + CSS.escape(name),\n      penalty: 1,\n    }),\n  );\n}\n\nfunction tagName(input: Element): Knot | null {\n  const name = input.tagName.toLowerCase();\n  if (config.tagName(name)) {\n    return {\n      name,\n      penalty: 2,\n    };\n  }\n  return null;\n}\n\nfunction any(): Knot {\n  return {\n    name: '*',\n    penalty: 3,\n  };\n}\n\nfunction index(input: Element): number | null {\n  const parent = input.parentNode;\n  if (!parent) {\n    return null;\n  }\n  let child = parent.firstChild;\n  if (!child) {\n    return null;\n  }\n  let i = 0;\n  while (child) {\n    if (child.nodeType === Node.ELEMENT_NODE) {\n      i++;\n    }\n    if (child === input) {\n      break;\n    }\n    child = child.nextSibling;\n  }\n  return i;\n}\n\nfunction nthChild(node: Knot, i: number): Knot {\n  return {\n    name: node.name + `:nth-child(${i})`,\n    penalty: node.penalty + 1,\n  };\n}\n\nfunction dispensableNth(node: Knot) {\n  return node.name !== 'html' && !node.name.startsWith('#');\n}\n\nfunction maybe(...level: (Knot | null)[]): Knot[] | null {\n  const list = level.filter(notEmpty);\n  if (list.length > 0) {\n    return list;\n  }\n  return null;\n}\n\nfunction notEmpty<T>(value: T | null | undefined): value is T {\n  return value !== null && value !== undefined;\n}\n\nfunction* combinations(stack: Knot[][], path: Knot[] = []): Generator<Knot[]> {\n  if (stack.length > 0) {\n    for (let node of stack[0]) {\n      yield* combinations(stack.slice(1, stack.length), path.concat(node));\n    }\n  } else {\n    yield path;\n  }\n}\n\nfunction sort(paths: Iterable<Path>): Path[] {\n  return [...paths].sort((a, b) => penalty(a) - penalty(b));\n}\n\ntype Scope = {\n  counter: number;\n  visited: Map<string, boolean>;\n};\n\nfunction* optimize(\n  path: Path,\n  input: Element,\n  scope: Scope = {\n    counter: 0,\n    visited: new Map<string, boolean>(),\n  },\n): Generator<Knot[]> {\n  if (path.length > 2 && path.length > config.optimizedMinLength) {\n    for (let i = 1; i < path.length - 1; i++) {\n      if (scope.counter > config.maxNumberOfTries) {\n        return; // Okay At least I tried!\n      }\n      scope.counter += 1;\n      const newPath = [...path];\n      newPath.splice(i, 1);\n      const newPathKey = selector(newPath);\n      if (scope.visited.has(newPathKey)) {\n        return;\n      }\n      if (unique(newPath) && same(newPath, input)) {\n        yield newPath;\n        scope.visited.set(newPathKey, true);\n        yield* optimize(newPath, input, scope);\n      }\n    }\n  }\n}\n\nfunction same(path: Path, input: Element) {\n  return rootDocument.querySelector(selector(path)) === input;\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2862, "column": 0}, "map": {"version":3,"file":"click.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/hooks/click.ts"],"sourcesContent":["import type { mouseInteractionCallBack } from '@amplitude/rrweb-types';\nimport { MouseInteractions } from '@amplitude/rrweb-types';\nimport { getWindowScroll, Mirror } from '../utils/rrweb';\nimport { SessionReplayEventsManager as AmplitudeSessionReplayEventsManager } from '../typings/session-replay';\nimport { PayloadBatcher } from 'src/track-destination';\nimport { finder } from '../libs/finder';\nimport { getGlobalScope, ILogger } from '@amplitude/analytics-core';\nimport { UGCFilterRule } from 'src/config/types';\nimport { getPageUrl } from '../helpers';\n\n// exported for testing\nexport type ClickEvent = {\n  timestamp: number;\n  x: number;\n  y: number;\n  viewportWidth: number;\n  viewportHeight: number;\n  pageUrl: string;\n  selector?: string;\n  type: 'click';\n};\n\n// exported for testing\nexport type ClickEventWithCount = ClickEvent & { count: number };\n\ntype Options = {\n  sessionId: string | number;\n  deviceIdFn: () => string | undefined;\n  eventsManager: AmplitudeSessionReplayEventsManager<'interaction', string>;\n  mirror: Mirror;\n  ugcFilterRules: UGCFilterRule[];\n};\n\nconst HOUR_IN_MILLISECONDS = 3_600_000;\n\nexport const clickNonBatcher: PayloadBatcher = ({ version, events }) => {\n  const clickEvents: ClickEvent[] = [];\n  events.forEach((evt: string) => {\n    const record = JSON.parse(evt) as Record<string, unknown>;\n    record.count = 1;\n    if (record.type === 'click') {\n      clickEvents.push(record as ClickEvent);\n    }\n  });\n  return { version, events: clickEvents };\n};\n\nexport const clickBatcher: PayloadBatcher = ({ version, events }) => {\n  const clickEvents: ClickEvent[] = [];\n  events.forEach((evt: string) => {\n    const record = JSON.parse(evt) as Record<string, unknown>;\n    if (record.type === 'click') {\n      clickEvents.push(record as ClickEvent);\n    }\n  });\n\n  const reduced = clickEvents.reduce<Record<string, ClickEventWithCount>>((prev, curr) => {\n    const { x, y, selector, timestamp } = curr;\n\n    // round down to nearest hour.\n    const hour = timestamp - (timestamp % HOUR_IN_MILLISECONDS);\n\n    const k = `${x}:${y}:${selector ?? ''}:${hour}`;\n    if (!prev[k]) {\n      prev[k] = { ...curr, timestamp: hour, count: 1 };\n    } else {\n      prev[k].count += 1;\n    }\n    return prev;\n  }, {});\n\n  return { version, events: Object.values(reduced) };\n};\n\nexport const clickHook: (logger: ILogger, options: Options) => mouseInteractionCallBack =\n  (logger, { eventsManager, sessionId, deviceIdFn, mirror, ugcFilterRules }) =>\n  (e) => {\n    if (e.type !== MouseInteractions.Click) {\n      return;\n    }\n\n    const globalScope = getGlobalScope();\n    if (!globalScope) {\n      return;\n    }\n\n    const { location, innerHeight, innerWidth } = globalScope;\n    // it only makes sense to send events if a pageUrl exists\n    if (!location) {\n      return;\n    }\n\n    const { x, y } = e;\n    if (x === undefined || y === undefined) {\n      return;\n    }\n\n    const node = mirror.getNode(e.id);\n    let selector;\n    if (node) {\n      try {\n        selector = finder(node as Element);\n      } catch (err) {\n        logger.debug('error resolving selector from finder');\n      }\n    }\n\n    const { left: scrollX, top: scrollY } = getWindowScroll(globalScope as unknown as Window);\n\n    const pageUrl = getPageUrl(location.href, ugcFilterRules);\n\n    const event: ClickEvent = {\n      x: x + scrollX,\n      y: y + scrollY,\n      selector,\n\n      viewportHeight: innerHeight,\n      viewportWidth: innerWidth,\n      pageUrl,\n      timestamp: Date.now(),\n      type: 'click',\n    };\n    const deviceId = deviceIdFn();\n    if (deviceId) {\n      eventsManager.addEvent({ sessionId, event: { type: 'interaction', data: JSON.stringify(event) }, deviceId });\n    }\n  };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2983, "column": 0}, "map": {"version":3,"file":"beacon-transport.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/beacon-transport.ts"],"sourcesContent":["import { getGlobalScope } from '@amplitude/analytics-core';\nimport { SessionReplayJoinedConfig } from './config/types';\nimport { SessionReplayDestinationSessionMetadata } from './typings/session-replay';\nimport { getServerUrl } from './helpers';\n\ntype BeaconSendFn<T> = (pageUrl: string, payload: T) => boolean;\n\n/**\n * For very small payloads it's preferable to use the [Beacon API](https://developer.mozilla.org/en-US/docs/Web/API/Beacon_API).\n * While it doesn't provide 100% guarantees on sends, it greatly helps with overall reliability and page load performance. As\n * the Beacon API has a potential to fail due to size constraints we want to fall back to XHR if need be. This is mostly to\n * be used with 'pagehide' or 'beforeunload' events.\n *\n * Note there are only 3 CORS safelisted Content-Types you can send:\n *\n * - application/x-www-form-urlencoded\n * - multipart/form-data\n * - text/plain\n *\n * If we do not send one of these, some browsers like Chrome may not send this at all. Also we incur the overhead of a preflight\n * request. In our case we will add no additional content-type header. If you are trying to ping a server that requires this\n * header, you may want to use the regular fetch API or a different mechanism.\n */\nexport class BeaconTransport<T> {\n  private sendBeacon: BeaconSendFn<T>;\n  private sendXhr: BeaconSendFn<T>;\n  private readonly basePageUrl: string;\n  private readonly context: Omit<SessionReplayDestinationSessionMetadata, 'deviceId'>;\n  private readonly apiKey: string;\n\n  constructor(context: Omit<SessionReplayDestinationSessionMetadata, 'deviceId'>, config: SessionReplayJoinedConfig) {\n    const globalScope = getGlobalScope();\n    if (globalScope && globalScope.navigator && typeof globalScope.navigator.sendBeacon === 'function') {\n      this.sendBeacon = (pageUrl, payload) => {\n        try {\n          if (globalScope.navigator.sendBeacon(pageUrl, JSON.stringify(payload))) {\n            return true;\n          }\n        } catch (e) {\n          // not logging error, since it would be hard to view and just adds overhead.\n        }\n        return false;\n      };\n    } else {\n      this.sendBeacon = () => false;\n    }\n\n    this.sendXhr = (pageUrl, payload) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', pageUrl, true);\n      xhr.setRequestHeader('Accept', '*/*');\n      xhr.send(JSON.stringify(payload));\n      return true;\n    };\n\n    this.basePageUrl = getServerUrl(config.serverZone, config.trackServerUrl);\n    this.apiKey = config.apiKey;\n    this.context = context;\n  }\n\n  send(deviceId: string, payload: T) {\n    const { sessionId, type } = this.context;\n    const urlParams = new URLSearchParams({\n      device_id: deviceId,\n      session_id: String(sessionId),\n      type: String(type),\n      api_key: this.apiKey,\n    });\n\n    const pageUrl = `${this.basePageUrl}?${urlParams.toString()}`;\n\n    // ideally send using the beacon API, but there is a chance it may fail, possibly due to a payload\n    // size limit. in this case, try best effort to send using xhr.\n    this.sendBeacon(pageUrl, payload) || this.sendXhr(pageUrl, payload);\n  }\n}\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,2BAA2B,CAAC;AAG3D,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;;;AAIzC;;;;;;;;;;;;;;;GAeG,CACH,IAAA,kBAAA;IAOE,SAAA,gBAAY,OAAkE,EAAE,MAAiC;QAC/G,IAAM,WAAW,wLAAG,kBAAA,AAAc,EAAE,CAAC;QACrC,IAAI,WAAW,IAAI,WAAW,CAAC,SAAS,IAAI,OAAO,WAAW,CAAC,SAAS,CAAC,UAAU,KAAK,UAAU,EAAE;YAClG,IAAI,CAAC,UAAU,GAAG,SAAC,OAAO,EAAE,OAAO;gBACjC,IAAI;oBACF,IAAI,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,EAAE;wBACtE,OAAO,IAAI,CAAC;qBACb;iBACF,CAAC,OAAO,CAAC,EAAE;gBACV,4EAA4E;iBAC7E;gBACD,OAAO,KAAK,CAAC;YACf,CAAC,CAAC;SACH,MAAM;YACL,IAAI,CAAC,UAAU,GAAG;gBAAM,OAAA,KAAK;YAAL,CAAK,CAAC;SAC/B;QAED,IAAI,CAAC,OAAO,GAAG,SAAC,OAAO,EAAE,OAAO;YAC9B,IAAM,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;YACjC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;YAChC,GAAG,CAAC,gBAAgB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;YACtC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;YAClC,OAAO,IAAI,CAAC;QACd,CAAC,CAAC;QAEF,IAAI,CAAC,WAAW,IAAG,uMAAA,AAAY,EAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC;QAC1E,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QAC5B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAED,gBAAA,SAAA,CAAA,IAAI,GAAJ,SAAK,QAAgB,EAAE,OAAU;QACzB,IAAA,KAAsB,IAAI,CAAC,OAAO,EAAhC,SAAS,GAAA,GAAA,SAAA,EAAE,IAAI,GAAA,GAAA,IAAiB,CAAC;QACzC,IAAM,SAAS,GAAG,IAAI,eAAe,CAAC;YACpC,SAAS,EAAE,QAAQ;YACnB,UAAU,EAAE,MAAM,CAAC,SAAS,CAAC;YAC7B,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC;YAClB,OAAO,EAAE,IAAI,CAAC,MAAM;SACrB,CAAC,CAAC;QAEH,IAAM,OAAO,GAAG,GAAA,MAAA,CAAG,IAAI,CAAC,WAAW,EAAA,KAAA,MAAA,CAAI,SAAS,CAAC,QAAQ,EAAE,CAAE,CAAC;QAE9D,kGAAkG;QAClG,+DAA+D;QAC/D,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IACtE,CAAC;IACH,OAAA,eAAC;AAAD,CAAC,AApDD,IAoDC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3058, "column": 0}, "map": {"version":3,"file":"scroll.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/hooks/scroll.ts"],"sourcesContent":["import { getWindowHeight, getWindowWidth } from '../utils/rrweb';\nimport type { scrollCallback, scrollPosition } from '@amplitude/rrweb-types';\nimport { BeaconTransport } from '../beacon-transport';\nimport { getGlobalScope } from '@amplitude/analytics-core';\nimport { SessionReplayJoinedConfig } from '../config/types';\nimport { SessionReplayDestinationSessionMetadata } from '../typings/session-replay';\nimport { getPageUrl } from '../helpers';\n\nexport type ScrollEvent = {\n  timestamp: number; // Timestamp the event occurred\n  maxScrollX: number; // Max window scroll X on a page\n  maxScrollY: number; // Max window scroll Y on a page\n  maxScrollHeight: number; // Max window scroll Y + window height on a page\n  maxScrollWidth: number; // Max window scroll X + window width on a page\n  viewportWidth: number;\n  viewportHeight: number;\n  pageUrl: string;\n  type: 'scroll';\n};\n\nexport type ScrollEventPayload = { version: number; events: ScrollEvent[] };\n\n/**\n * This is intended to watch and update max scroll activity when loaded for a particular page.\n * A new instance should be created if the page URL changes, since by default it does not reset\n * it's max scroll state. It is intended to send very few and very small events utilizing the\n * Beacon API.\n * @see {@link BeaconTransport} for more details on Beacon API usage.\n */\nexport class ScrollWatcher {\n  private timestamp = Date.now();\n  private _maxScrollX: number;\n  private _maxScrollY: number;\n  private _maxScrollWidth: number;\n  private _maxScrollHeight: number;\n  private readonly transport: BeaconTransport<ScrollEventPayload>;\n  private readonly config: Pick<SessionReplayJoinedConfig, 'loggerProvider' | 'interactionConfig'>;\n\n  static default(\n    context: Omit<SessionReplayDestinationSessionMetadata, 'deviceId'>,\n    config: SessionReplayJoinedConfig,\n  ): ScrollWatcher {\n    return new ScrollWatcher(new BeaconTransport<ScrollEventPayload>(context, config), config);\n  }\n\n  constructor(\n    transport: BeaconTransport<ScrollEventPayload>,\n    config: Pick<SessionReplayJoinedConfig, 'loggerProvider' | 'interactionConfig'>,\n  ) {\n    this._maxScrollX = 0;\n    this._maxScrollY = 0;\n    this._maxScrollWidth = getWindowWidth();\n    this._maxScrollHeight = getWindowHeight();\n    this.config = config;\n\n    this.transport = transport;\n  }\n\n  public get maxScrollX(): number {\n    return this._maxScrollX;\n  }\n\n  public get maxScrollY(): number {\n    return this._maxScrollY;\n  }\n\n  public get maxScrollWidth(): number {\n    return this._maxScrollWidth;\n  }\n\n  public get maxScrollHeight(): number {\n    return this._maxScrollHeight;\n  }\n\n  update(e: scrollPosition) {\n    const now = Date.now();\n    if (e.x > this._maxScrollX) {\n      const width = getWindowWidth();\n      this._maxScrollX = e.x;\n      const maxScrollWidth = e.x + width;\n      if (maxScrollWidth > this._maxScrollWidth) {\n        this._maxScrollWidth = maxScrollWidth;\n      }\n      this.timestamp = now;\n    }\n\n    if (e.y > this._maxScrollY) {\n      const height = getWindowHeight();\n      this._maxScrollY = e.y;\n      const maxScrollHeight = e.y + height;\n      if (maxScrollHeight > this._maxScrollHeight) {\n        this._maxScrollHeight = maxScrollHeight;\n      }\n      this.timestamp = now;\n    }\n  }\n\n  hook: scrollCallback = (e: scrollPosition) => {\n    this.update(e);\n  };\n\n  send: (deviceIdFn: () => string | undefined) => (_: PageTransitionEvent | Event) => void = (deviceIdFn) => (_) => {\n    const deviceId = deviceIdFn();\n    const globalScope = getGlobalScope();\n    if (globalScope && deviceId) {\n      this.transport.send(deviceId, {\n        version: 1,\n        events: [\n          {\n            maxScrollX: this._maxScrollX,\n            maxScrollY: this._maxScrollY,\n            maxScrollWidth: this._maxScrollWidth,\n            maxScrollHeight: this._maxScrollHeight,\n\n            viewportHeight: getWindowHeight(),\n            viewportWidth: getWindowWidth(),\n            pageUrl: getPageUrl(globalScope.location.href, this.config.interactionConfig?.ugcFilterRules ?? []),\n            timestamp: this.timestamp,\n            type: 'scroll',\n          },\n        ],\n      });\n    }\n  };\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3176, "column": 0}, "map": {"version":3,"file":"identifiers.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/identifiers.ts"],"sourcesContent":["import { generateSessionReplayId } from './helpers';\nimport { SessionIdentifiers as ISessionIdentifiers } from './typings/session-replay';\n\nexport class SessionIdentifiers implements ISessionIdentifiers {\n  deviceId?: string;\n  sessionId?: string | number;\n  sessionReplayId?: string;\n\n  constructor({ sessionId, deviceId }: { sessionId?: string | number; deviceId?: string }) {\n    this.deviceId = deviceId;\n    this.sessionId = sessionId;\n\n    if (sessionId && deviceId) {\n      this.sessionReplayId = generateSessionReplayId(sessionId, deviceId);\n    }\n  }\n}\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,uBAAuB,EAAE,MAAM,WAAW,CAAC;;AAGpD,IAAA,qBAAA;IAKE,SAAA,mBAAY,EAA2E;YAAzE,SAAS,GAAA,GAAA,SAAA,EAAE,QAAQ,GAAA,GAAA,QAAA;QAC/B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAE3B,IAAI,SAAS,IAAI,QAAQ,EAAE;YACzB,IAAI,CAAC,eAAe,4LAAG,0BAAA,AAAuB,EAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;SACrE;IACH,CAAC;IACH,OAAA,kBAAC;AAAD,CAAC,AAbD,IAaC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3200, "column": 0}, "map": {"version":3,"file":"event-compressor.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/events/event-compressor.ts"],"sourcesContent":["import { getGlobalScope } from '@amplitude/analytics-core';\nimport { pack } from '@amplitude/rrweb-packer';\nimport type { eventWithTime } from '@amplitude/rrweb-types';\nimport { SessionReplayJoinedConfig } from '../config/types';\nimport { SessionReplayEventsManager } from '../typings/session-replay';\n\ninterface TaskQueue {\n  event: eventWithTime;\n  sessionId: string | number;\n}\n\nconst DEFAULT_TIMEOUT = 2000;\nexport class EventCompressor {\n  taskQueue: TaskQueue[] = [];\n  isProcessing = false;\n  eventsManager?: SessionReplayEventsManager<'replay' | 'interaction', string>;\n  config: SessionReplayJoinedConfig;\n  deviceId: string | undefined;\n  canUseIdleCallback: boolean | undefined;\n  timeout: number;\n  worker?: Worker;\n\n  constructor(\n    eventsManager: SessionReplayEventsManager<'replay' | 'interaction', string>,\n    config: SessionReplayJoinedConfig,\n    deviceId: string | undefined,\n    workerScriptInternal?: string, // this is used for unit testing\n  ) {\n    const globalScope = getGlobalScope();\n    this.canUseIdleCallback = globalScope && 'requestIdleCallback' in globalScope;\n    this.eventsManager = eventsManager;\n    this.config = config;\n    this.deviceId = deviceId;\n    this.timeout = config.performanceConfig?.timeout || DEFAULT_TIMEOUT;\n\n    // These two lines will be changed at compile time.\n    const replace: Record<string, string> = {};\n    // This next line is going to be ridiculously hard to cover in unit tests, ignoring.\n    /* istanbul ignore next */\n    const workerScript = replace.COMPRESSION_WEBWORKER_BODY ?? workerScriptInternal;\n    if (this.config.experimental?.useWebWorker && globalScope && globalScope.Worker && workerScript) {\n      config.loggerProvider.log('[Experimental] Enabling web worker for compression');\n\n      const worker = new Worker(URL.createObjectURL(new Blob([workerScript], { type: 'application/javascript' })));\n      worker.onerror = (e) => {\n        config.loggerProvider.error(e);\n      };\n      worker.onmessage = (e) => {\n        const { compressedEvent, sessionId } = e.data as Record<string, string>;\n        this.addCompressedEventToManager(compressedEvent, sessionId);\n      };\n\n      this.worker = worker;\n    }\n  }\n\n  // Schedule processing during idle time\n  public scheduleIdleProcessing(): void {\n    if (!this.isProcessing) {\n      this.isProcessing = true;\n      requestIdleCallback(\n        (idleDeadline) => {\n          this.processQueue(idleDeadline);\n        },\n        { timeout: this.timeout },\n      );\n    }\n  }\n\n  // Add an event to the task queue if idle callback is supported or compress the event directly\n  public enqueueEvent(event: eventWithTime, sessionId: string | number): void {\n    if (this.canUseIdleCallback && this.config.performanceConfig?.enabled) {\n      this.config.loggerProvider.debug('Enqueuing event for processing during idle time.');\n      this.taskQueue.push({ event, sessionId });\n      this.scheduleIdleProcessing();\n    } else {\n      this.config.loggerProvider.debug('Processing event without idle callback.');\n      this.addCompressedEvent(event, sessionId);\n    }\n  }\n\n  // Process the task queue during idle time\n  public processQueue(idleDeadline: IdleDeadline): void {\n    // Process tasks while there's idle time or until the max number of tasks is reached\n    while (this.taskQueue.length > 0 && (idleDeadline.timeRemaining() > 0 || idleDeadline.didTimeout)) {\n      const task = this.taskQueue.shift();\n      if (task) {\n        const { event, sessionId } = task;\n        this.addCompressedEvent(event, sessionId);\n      }\n    }\n\n    // If there are still tasks in the queue, schedule the next idle callback\n    if (this.taskQueue.length > 0) {\n      requestIdleCallback(\n        (idleDeadline) => {\n          this.processQueue(idleDeadline);\n        },\n        { timeout: this.timeout },\n      );\n    } else {\n      this.isProcessing = false;\n    }\n  }\n\n  compressEvent = (event: eventWithTime) => {\n    const packedEvent = pack(event);\n    return JSON.stringify(packedEvent);\n  };\n\n  private addCompressedEventToManager = (compressedEvent: string, sessionId: string | number) => {\n    if (this.eventsManager && this.deviceId) {\n      this.eventsManager.addEvent({\n        event: { type: 'replay', data: compressedEvent },\n        sessionId,\n        deviceId: this.deviceId,\n      });\n    }\n  };\n\n  public addCompressedEvent = (event: eventWithTime, sessionId: string | number) => {\n    if (this.worker) {\n      // This indirectly compresses the event.\n      this.worker.postMessage({ event, sessionId });\n    } else {\n      const compressedEvent = this.compressEvent(event);\n      this.addCompressedEventToManager(compressedEvent, sessionId);\n    }\n  };\n\n  public terminate = () => {\n    this.worker?.terminate();\n  };\n}\n"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,2BAA2B,CAAC;AAC3D,OAAO,EAAE,IAAI,EAAE,MAAM,yBAAyB,CAAC;;;;AAU/C,IAAM,eAAe,GAAG,IAAI,CAAC;AAC7B,IAAA,kBAAA;IAUE,SAAA,gBACE,aAA2E,EAC3E,MAAiC,EACjC,QAA4B,EAC5B,oBAA6B;QAJ/B,IAAA,QAAA,IAAA,CAgCC;;QAzCD,IAAA,CAAA,SAAS,GAAgB,EAAE,CAAC;QAC5B,IAAA,CAAA,YAAY,GAAG,KAAK,CAAC;QA2FrB,IAAA,CAAA,aAAa,GAAG,SAAC,KAAoB;YACnC,IAAM,WAAW,qKAAG,QAAA,AAAI,EAAC,KAAK,CAAC,CAAC;YAChC,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QACrC,CAAC,CAAC;QAEM,IAAA,CAAA,2BAA2B,GAAG,SAAC,eAAuB,EAAE,SAA0B;YACxF,IAAI,KAAI,CAAC,aAAa,IAAI,KAAI,CAAC,QAAQ,EAAE;gBACvC,KAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;oBAC1B,KAAK,EAAE;wBAAE,IAAI,EAAE,QAAQ;wBAAE,IAAI,EAAE,eAAe;oBAAA,CAAE;oBAChD,SAAS,EAAA,SAAA;oBACT,QAAQ,EAAE,KAAI,CAAC,QAAQ;iBACxB,CAAC,CAAC;aACJ;QACH,CAAC,CAAC;QAEK,IAAA,CAAA,kBAAkB,GAAG,SAAC,KAAoB,EAAE,SAA0B;YAC3E,IAAI,KAAI,CAAC,MAAM,EAAE;gBACf,wCAAwC;gBACxC,KAAI,CAAC,MAAM,CAAC,WAAW,CAAC;oBAAE,KAAK,EAAA,KAAA;oBAAE,SAAS,EAAA,SAAA;gBAAA,CAAE,CAAC,CAAC;aAC/C,MAAM;gBACL,IAAM,eAAe,GAAG,KAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAClD,KAAI,CAAC,2BAA2B,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;aAC9D;QACH,CAAC,CAAC;QAEK,IAAA,CAAA,SAAS,GAAG;;YACjB,CAAA,KAAA,KAAI,CAAC,MAAM,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,SAAS,EAAE,CAAC;QAC3B,CAAC,CAAC;QAxGA,IAAM,WAAW,yLAAG,iBAAA,AAAc,EAAE,CAAC;QACrC,IAAI,CAAC,kBAAkB,GAAG,WAAW,IAAI,qBAAqB,IAAI,WAAW,CAAC;QAC9E,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,OAAO,GAAG,CAAA,CAAA,KAAA,MAAM,CAAC,iBAAiB,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,OAAO,KAAI,eAAe,CAAC;QAEpE,mDAAmD;QACnD,IAAM,OAAO,GAA2B,CAAA,CAAE,CAAC;QAC3C,oFAAoF;QACpF,wBAAA,EAA0B,CAC1B,IAAM,YAAY,GAAG,CAAA,KAAA,OAAO,CAAC,0BAA0B,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,oBAAoB,CAAC;QAChF,IAAI,CAAA,CAAA,KAAA,IAAI,CAAC,MAAM,CAAC,YAAY,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,YAAY,KAAI,WAAW,IAAI,WAAW,CAAC,MAAM,IAAI,YAAY,EAAE;YAC/F,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,oDAAoD,CAAC,CAAC;YAEhF,IAAM,MAAM,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC;gBAAC,YAAY;aAAC,EAAE;gBAAE,IAAI,EAAE,wBAAwB;YAAA,CAAE,CAAC,CAAC,CAAC,CAAC;YAC7G,MAAM,CAAC,OAAO,GAAG,SAAC,CAAC;gBACjB,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACjC,CAAC,CAAC;YACF,MAAM,CAAC,SAAS,GAAG,SAAC,CAAC;gBACb,IAAA,KAAiC,CAAC,CAAC,IAA8B,EAA/D,eAAe,GAAA,GAAA,eAAA,EAAE,SAAS,GAAA,GAAA,SAAqC,CAAC;gBACxE,KAAI,CAAC,2BAA2B,CAAC,eAAe,EAAE,SAAS,CAAC,CAAC;YAC/D,CAAC,CAAC;YAEF,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;SACtB;IACH,CAAC;IAED,uCAAuC;IAChC,gBAAA,SAAA,CAAA,sBAAsB,GAA7B;QAAA,IAAA,QAAA,IAAA,CAUC;QATC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,mBAAmB,CACjB,SAAC,YAAY;gBACX,KAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;YAClC,CAAC,EACD;gBAAE,OAAO,EAAE,IAAI,CAAC,OAAO;YAAA,CAAE,CAC1B,CAAC;SACH;IACH,CAAC;IAED,8FAA8F;IACvF,gBAAA,SAAA,CAAA,YAAY,GAAnB,SAAoB,KAAoB,EAAE,SAA0B;;QAClE,IAAI,IAAI,CAAC,kBAAkB,IAAA,CAAI,CAAA,KAAA,IAAI,CAAC,MAAM,CAAC,iBAAiB,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,OAAO,CAAA,EAAE;YACrE,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,kDAAkD,CAAC,CAAC;YACrF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBAAE,KAAK,EAAA,KAAA;gBAAE,SAAS,EAAA,SAAA;YAAA,CAAE,CAAC,CAAC;YAC1C,IAAI,CAAC,sBAAsB,EAAE,CAAC;SAC/B,MAAM;YACL,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,yCAAyC,CAAC,CAAC;YAC5E,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;SAC3C;IACH,CAAC;IAED,0CAA0C;IACnC,gBAAA,SAAA,CAAA,YAAY,GAAnB,SAAoB,YAA0B;QAA9C,IAAA,QAAA,IAAA,CAqBC;QApBC,oFAAoF;QACpF,MAAO,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,GAAG,CAAC,IAAI,YAAY,CAAC,UAAU,CAAC,CAAE;YACjG,IAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;YACpC,IAAI,IAAI,EAAE;gBACA,IAAA,OAAK,GAAgB,IAAI,CAAA,KAApB,EAAE,SAAS,GAAK,IAAI,CAAA,SAAT,CAAU;gBAClC,IAAI,CAAC,kBAAkB,CAAC,OAAK,EAAE,SAAS,CAAC,CAAC;aAC3C;SACF;QAED,yEAAyE;QACzE,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,mBAAmB,CACjB,SAAC,YAAY;gBACX,KAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;YAClC,CAAC,EACD;gBAAE,OAAO,EAAE,IAAI,CAAC,OAAO;YAAA,CAAE,CAC1B,CAAC;SACH,MAAM;YACL,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;SAC3B;IACH,CAAC;IA8BH,OAAA,eAAC;AAAD,CAAC,AAzHD,IAyHC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3333, "column": 0}, "map": {"version":3,"file":"session-replay.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/session-replay.ts"],"sourcesContent":["import {\n  Logger,\n  returnWrapper,\n  getAnalyticsConnector,\n  getGlobalScope,\n  ILogger,\n  LogLevel,\n} from '@amplitude/analytics-core';\n\n// Import only specific types to avoid pulling in the entire rrweb-types package\nimport { EventType as RRWebEventType, scrollCallback, eventWithTime } from '@amplitude/rrweb-types';\nimport { createSessionReplayJoinedConfigGenerator } from './config/joined-config';\nimport {\n  LoggingConfig,\n  SessionReplayJoinedConfig,\n  SessionReplayJoinedConfigGenerator,\n  SessionReplayMetadata,\n  SessionReplayLocalConfig,\n  SessionReplayRemoteConfig,\n} from './config/types';\nimport {\n  BLOCK_CLASS,\n  CustomRRwebEvent,\n  DEFAULT_SESSION_REPLAY_PROPERTY,\n  INTERACTION_MAX_INTERVAL,\n  INTERACTION_MIN_INTERVAL,\n  MASK_TEXT_CLASS,\n  SESSION_REPLAY_DEBUG_PROPERTY,\n} from './constants';\nimport { createEventsManager } from './events/events-manager';\nimport { MultiEventManager } from './events/multi-manager';\nimport { generateHashCode, getDebugConfig, getPageUrl, getStorageSize, isSessionInSample, maskFn } from './helpers';\nimport { clickBatcher, clickHook, clickNonBatcher } from './hooks/click';\nimport { ScrollWatcher } from './hooks/scroll';\nimport { SessionIdentifiers } from './identifiers';\nimport {\n  AmplitudeSessionReplay,\n  SessionReplayEventsManager as AmplitudeSessionReplayEventsManager,\n  DebugInfo,\n  EventType,\n  EventsManagerWithType,\n  SessionIdentifiers as ISessionIdentifiers,\n  SessionReplayOptions,\n} from './typings/session-replay';\nimport { VERSION } from './version';\nimport { EventCompressor } from './events/event-compressor';\nimport { SafeLoggerProvider } from './logger';\n\n// Import only the type for NetworkRequestEvent to keep type safety\nimport type { NetworkRequestEvent, NetworkObservers } from './observers';\nimport type { RecordFunction } from './utils/rrweb';\n\ntype PageLeaveFn = (e: PageTransitionEvent | Event) => void;\n\nexport class SessionReplay implements AmplitudeSessionReplay {\n  name = '@amplitude/session-replay-browser';\n  config: SessionReplayJoinedConfig | undefined;\n  joinedConfigGenerator: SessionReplayJoinedConfigGenerator | undefined;\n  identifiers: ISessionIdentifiers | undefined;\n  eventsManager?: AmplitudeSessionReplayEventsManager<'replay' | 'interaction', string>;\n  loggerProvider: ILogger;\n  recordCancelCallback: ReturnType<RecordFunction> | null = null;\n  eventCount = 0;\n  eventCompressor: EventCompressor | undefined;\n\n  // Visible for testing only\n  pageLeaveFns: PageLeaveFn[] = [];\n  private scrollHook?: scrollCallback;\n  private networkObservers?: NetworkObservers;\n  private metadata: SessionReplayMetadata | undefined;\n\n  // Cache the dynamically imported record function\n  private recordFunction: RecordFunction | null = null;\n\n  constructor() {\n    this.loggerProvider = new SafeLoggerProvider(new Logger());\n  }\n\n  init(apiKey: string, options: SessionReplayOptions) {\n    return returnWrapper(this._init(apiKey, options));\n  }\n\n  private teardownEventListeners = (teardown: boolean) => {\n    const globalScope = getGlobalScope();\n    if (globalScope) {\n      globalScope.removeEventListener('blur', this.blurListener);\n      globalScope.removeEventListener('focus', this.focusListener);\n      !teardown && globalScope.addEventListener('blur', this.blurListener);\n      !teardown && globalScope.addEventListener('focus', this.focusListener);\n      // prefer pagehide to unload events, this is the standard going forward. it is not\n      // 100% reliable, but is bfcache-compatible.\n      if (globalScope.self && 'onpagehide' in globalScope.self) {\n        globalScope.removeEventListener('pagehide', this.pageLeaveListener);\n        !teardown && globalScope.addEventListener('pagehide', this.pageLeaveListener);\n      } else {\n        // this has performance implications, but is the only way we can reliably send events\n        // in browser that don't support pagehide.\n        globalScope.removeEventListener('beforeunload', this.pageLeaveListener);\n        !teardown && globalScope.addEventListener('beforeunload', this.pageLeaveListener);\n      }\n    }\n  };\n\n  protected async _init(apiKey: string, options: SessionReplayOptions) {\n    this.loggerProvider = new SafeLoggerProvider(options.loggerProvider || new Logger());\n    Object.prototype.hasOwnProperty.call(options, 'logLevel') &&\n      this.loggerProvider.enable(options.logLevel as LogLevel);\n    this.identifiers = new SessionIdentifiers({ sessionId: options.sessionId, deviceId: options.deviceId });\n    this.joinedConfigGenerator = await createSessionReplayJoinedConfigGenerator(apiKey, options);\n    const { joinedConfig, localConfig, remoteConfig } = await this.joinedConfigGenerator.generateJoinedConfig(\n      this.identifiers.sessionId,\n    );\n    this.config = joinedConfig;\n\n    this.setMetadata(\n      options.sessionId,\n      joinedConfig,\n      localConfig,\n      remoteConfig,\n      options.version?.version,\n      VERSION,\n      options.version?.type,\n    );\n\n    if (options.sessionId && this.config.interactionConfig?.enabled) {\n      const scrollWatcher = ScrollWatcher.default(\n        {\n          sessionId: options.sessionId,\n          type: 'interaction',\n        },\n        this.config,\n      );\n      this.pageLeaveFns = [scrollWatcher.send(this.getDeviceId.bind(this)).bind(scrollWatcher)];\n      this.scrollHook = scrollWatcher.hook.bind(scrollWatcher);\n    }\n\n    const managers: EventsManagerWithType<EventType, string>[] = [];\n    let { storeType } = this.config;\n    if (storeType === 'idb' && !getGlobalScope()?.indexedDB) {\n      storeType = 'memory';\n      this.loggerProvider.warn('Could not use preferred indexedDB storage, reverting to in memory option.');\n    }\n    this.loggerProvider.log(`Using ${storeType} for event storage.`);\n    try {\n      const rrwebEventManager = await createEventsManager<'replay'>({\n        config: this.config,\n        sessionId: this.identifiers.sessionId,\n        type: 'replay',\n        storeType,\n      });\n      managers.push({ name: 'replay', manager: rrwebEventManager });\n    } catch (error) {\n      const typedError = error as Error;\n      this.loggerProvider.warn(`Error occurred while creating replay events manager: ${typedError.toString()}`);\n    }\n\n    if (this.config.interactionConfig?.enabled) {\n      const payloadBatcher = this.config.interactionConfig.batch ? clickBatcher : clickNonBatcher;\n      try {\n        const interactionEventManager = await createEventsManager<'interaction'>({\n          config: this.config,\n          sessionId: this.identifiers.sessionId,\n          type: 'interaction',\n          minInterval: this.config.interactionConfig.trackEveryNms ?? INTERACTION_MIN_INTERVAL,\n          maxInterval: INTERACTION_MAX_INTERVAL,\n          payloadBatcher,\n          storeType,\n        });\n        managers.push({ name: 'interaction', manager: interactionEventManager });\n      } catch (error) {\n        const typedError = error as Error;\n        this.loggerProvider.warn(`Error occurred while creating interaction events manager: ${typedError.toString()}`);\n      }\n    }\n\n    this.eventsManager = new MultiEventManager<'replay' | 'interaction', string>(...managers);\n    // To prevent too many threads.\n    if (this.eventCompressor) {\n      this.eventCompressor.terminate();\n    }\n    this.eventCompressor = new EventCompressor(this.eventsManager, this.config, this.getDeviceId());\n\n    await this.initializeNetworkObservers();\n\n    this.loggerProvider.log('Installing @amplitude/session-replay-browser.');\n\n    this.teardownEventListeners(false);\n\n    void this.initialize(true);\n  }\n\n  setSessionId(sessionId: string | number, deviceId?: string) {\n    return returnWrapper(this.asyncSetSessionId(sessionId, deviceId));\n  }\n\n  async asyncSetSessionId(sessionId: string | number, deviceId?: string) {\n    const previousSessionId = this.identifiers && this.identifiers.sessionId;\n    if (previousSessionId) {\n      this.sendEvents(previousSessionId);\n    }\n\n    const deviceIdForReplayId = deviceId || this.getDeviceId();\n    this.identifiers = new SessionIdentifiers({\n      sessionId: sessionId,\n      deviceId: deviceIdForReplayId,\n    });\n\n    // If there is no previous session id, SDK is being initialized for the first time,\n    // and config was just fetched in initialization, so no need to fetch it a second time\n    if (this.joinedConfigGenerator && previousSessionId) {\n      const { joinedConfig } = await this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId);\n      this.config = joinedConfig;\n    }\n    void this.recordEvents();\n  }\n\n  getSessionReplayProperties() {\n    const config = this.config;\n    const identifiers = this.identifiers;\n    if (!config || !identifiers) {\n      this.loggerProvider.warn('Session replay init has not been called, cannot get session replay properties.');\n      return {};\n    }\n\n    const shouldRecord = this.getShouldRecord();\n    let eventProperties: { [key: string]: string | null } = {};\n\n    if (shouldRecord) {\n      eventProperties = {\n        [DEFAULT_SESSION_REPLAY_PROPERTY]: identifiers.sessionReplayId ? identifiers.sessionReplayId : null,\n      };\n      if (config.debugMode) {\n        eventProperties[SESSION_REPLAY_DEBUG_PROPERTY] = JSON.stringify({\n          appHash: generateHashCode(config.apiKey).toString(),\n        });\n      }\n    }\n\n    void this.addCustomRRWebEvent(\n      CustomRRwebEvent.GET_SR_PROPS,\n      {\n        shouldRecord,\n        eventProperties: eventProperties,\n      },\n      this.eventCount === 10,\n    );\n    if (this.eventCount === 10) {\n      this.eventCount = 0;\n    }\n    this.eventCount++;\n\n    return eventProperties;\n  }\n\n  blurListener = () => {\n    this.sendEvents();\n  };\n\n  focusListener = () => {\n    // Restart recording on focus to ensure that when user\n    // switches tabs, we take a full snapshot\n    void this.recordEvents(false);\n  };\n\n  /**\n   * This is an instance member so that if init is called multiple times\n   * it doesn't add another listener to the page leave event. This is to\n   * prevent duplicate listener actions from firing.\n   */\n  private pageLeaveListener = (e: PageTransitionEvent | Event) => {\n    this.pageLeaveFns.forEach((fn) => {\n      fn(e);\n    });\n  };\n\n  sendEvents(sessionId?: string | number) {\n    const sessionIdToSend = sessionId || this.identifiers?.sessionId;\n    const deviceId = this.getDeviceId();\n    this.eventsManager &&\n      sessionIdToSend &&\n      deviceId &&\n      this.eventsManager.sendCurrentSequenceEvents({ sessionId: sessionIdToSend, deviceId });\n  }\n\n  async initialize(shouldSendStoredEvents = false) {\n    if (!this.identifiers?.sessionId) {\n      this.loggerProvider.log(`Session is not being recorded due to lack of session id.`);\n      return Promise.resolve();\n    }\n\n    const deviceId = this.getDeviceId();\n    if (!deviceId) {\n      this.loggerProvider.log(`Session is not being recorded due to lack of device id.`);\n      return Promise.resolve();\n    }\n    this.eventsManager && shouldSendStoredEvents && void this.eventsManager.sendStoredEvents({ deviceId });\n\n    return this.recordEvents();\n  }\n\n  shouldOptOut() {\n    let identityStoreOptOut: boolean | undefined;\n    if (this.config?.instanceName) {\n      const identityStore = getAnalyticsConnector(this.config.instanceName).identityStore;\n      identityStoreOptOut = identityStore.getIdentity().optOut;\n    }\n\n    return identityStoreOptOut !== undefined ? identityStoreOptOut : this.config?.optOut;\n  }\n\n  getShouldRecord() {\n    if (!this.identifiers || !this.config || !this.identifiers.sessionId) {\n      this.loggerProvider.warn(`Session is not being recorded due to lack of config, please call sessionReplay.init.`);\n      return false;\n    }\n    if (!this.config.captureEnabled) {\n      this.loggerProvider.log(\n        `Session ${this.identifiers.sessionId} not being captured due to capture being disabled for project or because the remote config could not be fetched.`,\n      );\n      return false;\n    }\n\n    if (this.shouldOptOut()) {\n      this.loggerProvider.log(`Opting session ${this.identifiers.sessionId} out of recording due to optOut config.`);\n      return false;\n    }\n\n    const isInSample = isSessionInSample(this.identifiers.sessionId, this.config.sampleRate);\n    if (!isInSample) {\n      this.loggerProvider.log(`Opting session ${this.identifiers.sessionId} out of recording due to sample rate.`);\n    }\n    return isInSample;\n  }\n\n  getBlockSelectors(): string | string[] | undefined {\n    // For some reason, this defaults to empty array ([]) if undefined in the compiled script.\n    // Empty arrays cause errors when being evaluated in Safari.\n    // Force the selector to be undefined if it's an empty array.\n    const blockSelector = this.config?.privacyConfig?.blockSelector ?? [];\n    if (blockSelector.length === 0) {\n      return undefined;\n    }\n    return blockSelector;\n  }\n\n  getMaskTextSelectors(): string | undefined {\n    if (this.config?.privacyConfig?.defaultMaskLevel === 'conservative') {\n      return '*';\n    }\n\n    const maskSelector = this.config?.privacyConfig?.maskSelector;\n    if (!maskSelector) {\n      return;\n    }\n\n    return maskSelector as unknown as string;\n  }\n\n  async getRecordingPlugins(loggingConfig: LoggingConfig | undefined) {\n    const plugins = [];\n\n    // Default plugin settings -\n    // {\n    //   level: ['info', 'log', 'warn', 'error'],\n    //   lengthThreshold: 10000,\n    //   stringifyOptions: {\n    //     stringLengthLimit: undefined,\n    //     numOfKeysLimit: 50,\n    //     depthOfLimit: 4,\n    //   },\n    //   logger: window.console,\n    //   }\n    if (loggingConfig?.console?.enabled) {\n      try {\n        // Dynamic import keeps console plugin separate and only loads when needed\n        const { getRecordConsolePlugin } = await import('@amplitude/rrweb-plugin-console-record');\n        plugins.push(getRecordConsolePlugin({ level: loggingConfig.console.levels }));\n      } catch (error) {\n        this.loggerProvider.warn('Failed to load console plugin:', error);\n      }\n    }\n\n    return plugins.length > 0 ? plugins : undefined;\n  }\n\n  private async getRecordFunction(): Promise<RecordFunction | null> {\n    if (this.recordFunction) {\n      return this.recordFunction;\n    }\n\n    try {\n      const { record } = await import('@amplitude/rrweb-record');\n      this.recordFunction = record;\n      return record;\n    } catch (error) {\n      this.loggerProvider.warn('Failed to load rrweb-record module:', error);\n      return null;\n    }\n  }\n\n  async recordEvents(shouldLogMetadata = true) {\n    const config = this.config;\n    const shouldRecord = this.getShouldRecord();\n    const sessionId = this.identifiers?.sessionId;\n    if (!shouldRecord || !sessionId || !config) {\n      return;\n    }\n    this.stopRecordingEvents();\n\n    const recordFunction = await this.getRecordFunction();\n\n    // May be undefined if cannot import rrweb-record\n    if (!recordFunction) {\n      return;\n    }\n\n    await this.initializeNetworkObservers();\n\n    this.networkObservers?.start((event: NetworkRequestEvent) => {\n      void this.addCustomRRWebEvent(CustomRRwebEvent.FETCH_REQUEST, event);\n    });\n    const { privacyConfig, interactionConfig, loggingConfig } = config;\n\n    const hooks = interactionConfig?.enabled\n      ? {\n          mouseInteraction:\n            this.eventsManager &&\n            clickHook(this.loggerProvider, {\n              eventsManager: this.eventsManager,\n              sessionId,\n              deviceIdFn: this.getDeviceId.bind(this),\n              mirror: recordFunction.mirror,\n              ugcFilterRules: interactionConfig.ugcFilterRules ?? [],\n            }),\n          scroll: this.scrollHook,\n        }\n      : {};\n\n    const ugcFilterRules =\n      interactionConfig?.enabled && interactionConfig.ugcFilterRules ? interactionConfig.ugcFilterRules : [];\n\n    this.loggerProvider.log(`Session Replay capture beginning for ${sessionId}.`);\n\n    try {\n      this.recordCancelCallback = recordFunction({\n        emit: (event: eventWithTime) => {\n          if (this.shouldOptOut()) {\n            this.loggerProvider.log(`Opting session ${sessionId} out of recording due to optOut config.`);\n            this.stopRecordingEvents();\n            this.sendEvents();\n            return;\n          }\n\n          if (event.type === RRWebEventType.Meta) {\n            event.data.href = getPageUrl(event.data.href, ugcFilterRules);\n          }\n\n          if (this.eventCompressor) {\n            // Schedule processing during idle time if the browser supports requestIdleCallback\n            this.eventCompressor.enqueueEvent(event, sessionId);\n          }\n        },\n        inlineStylesheet: config.shouldInlineStylesheet,\n        hooks,\n        maskAllInputs: true,\n        maskTextClass: MASK_TEXT_CLASS,\n        blockClass: BLOCK_CLASS,\n        blockSelector: this.getBlockSelectors() as string | undefined,\n        applyBackgroundColorToBlockedElements: config.applyBackgroundColorToBlockedElements,\n        maskInputFn: maskFn('input', privacyConfig),\n        maskTextFn: maskFn('text', privacyConfig),\n        maskTextSelector: this.getMaskTextSelectors(),\n        recordCanvas: false,\n        errorHandler: (error: unknown) => {\n          const typedError = error as Error & { _external_?: boolean };\n\n          // styled-components relies on this error being thrown and bubbled up, rrweb is otherwise suppressing it\n          if (typedError.message.includes('insertRule') && typedError.message.includes('CSSStyleSheet')) {\n            throw typedError;\n          }\n\n          // rrweb does monkey patching on certain window functions such as CSSStyleSheet.proptype.insertRule,\n          // and errors from external clients calling these functions can get suppressed. Styled components depend\n          // on these errors being re-thrown.\n          if (typedError._external_) {\n            throw typedError;\n          }\n\n          this.loggerProvider.warn('Error while capturing replay: ', typedError.toString());\n          // Return true so that we don't clutter user's consoles with internal rrweb errors\n          return true;\n        },\n        plugins: await this.getRecordingPlugins(loggingConfig),\n      });\n\n      void this.addCustomRRWebEvent(CustomRRwebEvent.DEBUG_INFO);\n      if (shouldLogMetadata) {\n        void this.addCustomRRWebEvent(CustomRRwebEvent.METADATA, this.metadata);\n      }\n    } catch (error) {\n      this.loggerProvider.warn('Failed to initialize session replay:', error);\n    }\n  }\n\n  addCustomRRWebEvent = async (\n    eventName: CustomRRwebEvent,\n    eventData: { [key: string]: any } = {},\n    addStorageInfo = true,\n  ) => {\n    try {\n      let debugInfo: DebugInfo | undefined = undefined;\n      const config = this.config;\n      // Only add debug info for non-metadata events\n      if (config && eventName !== CustomRRwebEvent.METADATA) {\n        debugInfo = {\n          config: getDebugConfig(config),\n          version: VERSION,\n        };\n        if (addStorageInfo) {\n          const storageSizeData = await getStorageSize();\n          debugInfo = {\n            ...storageSizeData,\n            ...debugInfo,\n          };\n        }\n      }\n      // Check first to ensure we are recording\n      if (this.recordCancelCallback && this.recordFunction) {\n        this.recordFunction.addCustomEvent(eventName, {\n          ...eventData,\n          ...debugInfo,\n        });\n      } else {\n        this.loggerProvider.debug(\n          `Not able to add custom replay capture event ${eventName} due to no ongoing recording.`,\n        );\n      }\n    } catch (e) {\n      this.loggerProvider.debug('Error while adding custom replay capture event: ', e);\n    }\n  };\n\n  stopRecordingEvents = () => {\n    try {\n      this.loggerProvider.log('Session Replay capture stopping.');\n      this.recordCancelCallback && this.recordCancelCallback();\n      this.recordCancelCallback = null;\n      this.networkObservers?.stop();\n    } catch (error) {\n      const typedError = error as Error;\n      this.loggerProvider.warn(`Error occurred while stopping replay capture: ${typedError.toString()}`);\n    }\n  };\n\n  getDeviceId() {\n    return this.identifiers?.deviceId;\n  }\n\n  getSessionId() {\n    return this.identifiers?.sessionId;\n  }\n\n  async flush(useRetry = false) {\n    return this.eventsManager?.flush(useRetry);\n  }\n\n  shutdown() {\n    this.teardownEventListeners(true);\n    this.stopRecordingEvents();\n    this.sendEvents();\n  }\n\n  private mapSDKType(sdkType: string | undefined) {\n    if (sdkType === 'plugin') {\n      return '@amplitude/plugin-session-replay-browser';\n    }\n\n    if (sdkType === 'segment') {\n      return '@amplitude/segment-session-replay-plugin';\n    }\n\n    return null;\n  }\n\n  private setMetadata(\n    sessionId: string | number | undefined,\n    joinedConfig: SessionReplayJoinedConfig,\n    localConfig: SessionReplayLocalConfig,\n    remoteConfig: SessionReplayRemoteConfig | undefined,\n    replaySDKVersion: string | undefined,\n    standaloneSDKVersion: string | undefined,\n    sdkType: string | undefined,\n  ) {\n    const hashValue = sessionId?.toString() ? generateHashCode(sessionId.toString()) : undefined;\n\n    this.metadata = {\n      joinedConfig,\n      localConfig,\n      remoteConfig,\n      sessionId,\n      hashValue,\n      sampleRate: joinedConfig.sampleRate,\n      replaySDKType: this.mapSDKType(sdkType),\n      replaySDKVersion,\n      standaloneSDKType: '@amplitude/session-replay-browser',\n      standaloneSDKVersion,\n    };\n  }\n\n  private async initializeNetworkObservers(): Promise<void> {\n    if (this.config?.loggingConfig?.network?.enabled && !this.networkObservers) {\n      try {\n        const { NetworkObservers: NetworkObserversClass } = await import('./observers');\n        this.networkObservers = new NetworkObserversClass();\n      } catch (error) {\n        this.loggerProvider.warn('Failed to import or instantiate NetworkObservers:', error);\n      }\n    }\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4147, "column": 0}, "map": {"version":3,"file":"session-replay-factory.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/session-replay-factory.ts"],"sourcesContent":["import { debugWrapper, LogConfig } from '@amplitude/analytics-core';\nimport { getDefaultConfig } from './config/local-config';\nimport { SessionReplay } from './session-replay';\nimport { AmplitudeSessionReplay } from './typings/session-replay';\n\nexport const getLogConfig = (sessionReplay: SessionReplay) => (): LogConfig => {\n  const { config } = sessionReplay;\n  const { loggerProvider: logger, logLevel } = config || getDefaultConfig();\n  return {\n    logger,\n    logLevel,\n  };\n};\n\nconst createInstance: () => AmplitudeSessionReplay = () => {\n  const sessionReplay = new SessionReplay();\n  return {\n    init: debugWrapper(sessionReplay.init.bind(sessionReplay), 'init', getLogConfig(sessionReplay)),\n    setSessionId: debugWrapper(\n      sessionReplay.setSessionId.bind(sessionReplay),\n      'setSessionId',\n      getLogConfig(sessionReplay),\n    ),\n    getSessionId: debugWrapper(\n      sessionReplay.getSessionId.bind(sessionReplay),\n      'getSessionId',\n      getLogConfig(sessionReplay),\n    ),\n    getSessionReplayProperties: debugWrapper(\n      sessionReplay.getSessionReplayProperties.bind(sessionReplay),\n      'getSessionReplayProperties',\n      getLogConfig(sessionReplay),\n    ),\n    flush: debugWrapper(sessionReplay.flush.bind(sessionReplay), 'flush', getLogConfig(sessionReplay)),\n    shutdown: debugWrapper(sessionReplay.shutdown.bind(sessionReplay), 'shutdown', getLogConfig(sessionReplay)),\n  };\n};\n\nexport default createInstance();\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,YAAY,EAAa,MAAM,2BAA2B,CAAC;AACpE,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzD,OAAO,EAAE,aAAa,EAAE,MAAM,kBAAkB,CAAC;;;;AAG1C,IAAM,YAAY,GAAG,SAAC,aAA4B;IAAK,OAAA;QACpD,IAAA,MAAM,GAAK,aAAa,CAAA,MAAlB,CAAmB;QAC3B,IAAA,KAAuC,MAAM,+MAAI,mBAAA,AAAgB,EAAE,GAAjD,MAAM,GAAA,GAAA,cAAA,EAAE,QAAQ,GAAA,GAAA,QAAiC,CAAC;QAC1E,OAAO;YACL,MAAM,EAAA,MAAA;YACN,QAAQ,EAAA,QAAA;SACT,CAAC;IACJ,CAAC;AAP6D,CAO7D,CAAC;AAEF,IAAM,cAAc,GAAiC;IACnD,IAAM,aAAa,GAAG,IAAI,+MAAa,EAAE,CAAC;IAC1C,OAAO;QACL,IAAI,uLAAE,eAAA,AAAY,EAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,MAAM,EAAE,YAAY,CAAC,aAAa,CAAC,CAAC;QAC/F,YAAY,uLAAE,eAAA,AAAY,EACxB,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,EAC9C,cAAc,EACd,YAAY,CAAC,aAAa,CAAC,CAC5B;QACD,YAAY,EAAE,oMAAA,AAAY,EACxB,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,EAC9C,cAAc,EACd,YAAY,CAAC,aAAa,CAAC,CAC5B;QACD,0BAA0B,GAAE,mMAAA,AAAY,EACtC,aAAa,CAAC,0BAA0B,CAAC,IAAI,CAAC,aAAa,CAAC,EAC5D,4BAA4B,EAC5B,YAAY,CAAC,aAAa,CAAC,CAC5B;QACD,KAAK,uLAAE,eAAA,AAAY,EAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,OAAO,EAAE,YAAY,CAAC,aAAa,CAAC,CAAC;QAClG,QAAQ,uLAAE,eAAA,AAAY,EAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,UAAU,EAAE,YAAY,CAAC,aAAa,CAAC,CAAC;KAC5G,CAAC;AACJ,CAAC,CAAC;uCAEa,cAAc,EAAE,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4186, "column": 0}, "map": {"version":3,"file":"index.js","sourceRoot":"","sources":["file:///Users/facundoagustinpiaggio/Desktop/ProyectoInternos/Repositorios/SessionReplay-Sample/node_modules/%40amplitude/session-replay-browser/src/index.ts"],"sourcesContent":["import sessionReplay from './session-replay-factory';\nexport const { init, setSessionId, getSessionId, getSessionReplayProperties, flush, shutdown } = sessionReplay;\nexport { SessionReplayOptions, StoreType } from './typings/session-replay';\nexport { SafeLoggerProvider } from './logger';\nexport { AmplitudeSessionReplay } from './typings/session-replay';\n"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,aAAa,MAAM,0BAA0B,CAAC;;AACtC,IAAA,IAAI,6MAA8E,UAAa,CAAA,IAA3F,EAAE,YAAY,6MAAgE,UAAa,CAAA,YAA7E,EAAE,YAAY,6MAAkD,UAAa,CAAA,YAA/D,EAAE,0BAA0B,6MAAsB,UAAa,CAAA,0BAAnC,EAAE,KAAK,6MAAe,UAAa,CAAA,KAA5B,EAAE,QAAQ,6MAAK,UAAa,CAAA,QAAlB,CAAmB","ignoreList":[0],"debugId":null}}]
}